{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/icon-16.png","webpack:///./assets/icon-32.png","webpack:///./assets/icon-80_1.png","webpack:///./src/app/app.js","webpack:///./src/app/attention.js","webpack:///./src/app/favicon.ico","webpack:///./src/app/services/filedata.service.js","webpack:///./src/app/services/gateway.service.js","webpack:///./src/app/services/session.service.js","webpack:///./src/app/utils.js"],"names":["require","prodEnvironment","haveCamera","userIp","iter","terms","customerFirstName","userFromOffice","userIsActive","isNewUser","counter","outsideOffice","data","email","password","Office","onReady","info","localStorage","getItem","console","log","host","HostType","Word","Excel","PowerPoint","getEnvironment","Utils","then","value","filedataService","getIp","respuesta","ip","setItem","document","getElementById","style","paddingTop","innerHTML","getElementsByClassName","element","display","moveTitles","onInput","submit","oninput","onsubmit","onSubmit","event","undefined","preventDefault","target","id","validateEmail","passDOM","window","location","href","showInputInvalid","sessionService","authId","gatewayService","validate","hit","providedToken","nextStep","properties","TOKEN","resizeTo","attention","title","content","clearForm","borderColor","response","error","statusCode","textContent","isMobile","innerWidth","isTablet","isDesktop","windowInfo","validateUser","browser","os","userExists","login","required1","createAttribute","required2","required3","required4","attributes","setNamedItem","contentFromLS","getIdFromOffice","RefreshLayout","req1","req2","pass1","pass2","isValid","classList","contains","createNewUser","password1","password2","disabled","createCustomer","firstName","lastName","user","customerMobile","Respuesta","status","message","idCustomer","validateThisUser","process","askOTPfromUser","timeDown","modal","querySelector","overflow","form","phoneNumber","resendCode","addEventListener","e","pin","acceptTerms","Resp","success","addToMiFirma","innerText","auth_code","status_code","getValidationParameter","activationMessage","activationBase64","btoa","activateAccount","showSuccess","showProcessError","modalContent","authority","customerLastName","processTerms","routerInstance","navigate","fromOffice","requiredField","JSON","stringify","isActive","i","push","modalTerms","btn1","btn2","span","onclick","HTMLContent","getUserTerms","template","toString","validatePassword","passwordConfirm","helperText","charLength","lowercase","uppercase","special","match","pattern","length","regex","test","patternTest","hasClass","addClass","removeClass","el","className","add","remove","replace","RegExp","split","join","userFirstName","userLastName","togglePassword","togglePassword1","togglePassword2","type","getAttribute","setAttribute","toggle","wantedId","keys","Object","str","startsWith","obj","parse","entries","key","$","keyup","val","siblings","switchClass","each","seconds","x","setInterval","clearInterval","t","n","exports","module","define","TypeError","o","enumerable","configurable","writable","defineProperty","s","prototype","create","constructor","r","setPrototypeOf","getPrototypeOf","__proto__","a","ReferenceError","c","l","arguments","createElement","toLowerCase","concat","forEach","appendChild","createTextNode","u","options","useInnerHTML","animation","port","createBase","click","close","container","body","beforeRender","afterRender","requestAnimationFrame","cancelAnimationFrame","opacity","parentElement","removeChild","afterClose","beforeClose","destroy","h","call","injectTemplate","render","p","submitText","placeholderText","keyCode","input","placeholder","handleInput","d","buttonCancel","buttonConfirm","onCancel","onConfirm","Alert","Confirm","Prompt","version","FiledataService","fetch","json","httpOptions","httpOptions3","httpOptions2","url","GatewayMiFirma","GatewayService","publicIP","customerId","parseInt","termsId","method","headers","name","lastname","mobile","phonenumber","userAgent","tablet","desktop","camera","secondcamera","fingerprint","processCode","deviceInfo","publicIp","hasCamera","hasSecondaryCamera","hasFingerprintReader","guid","ids","slice","pass","newPassword","file","fileName","fileExtension","path","activator","SessionService","noob","clear","Uint8ArrayToStringBase64","binary","len","byteLength","String","fromCharCode","stringToUint","src","atob","bytes","Uint8Array","charCodeAt","logout","router","navigateByUrl","getExtensionImageFromURI","base64","substr","Error","indexOf","semicolon","uri","extension","b64toBlob","dataURI","byteString","ab","ArrayBuffer","ia","Blob","getHexColorFromRgba","color","datosMaquina","unknown","nVer","navigator","appVersion","nAgt","appName","parseFloat","majorVersion","nameOffset","verOffset","ix","substring","lastIndexOf","toUpperCase","isNaN","clientStrings","cs","osVersion","exec","jscd","browserVersion","browserMajorVersion","detectWebcam","mediaDevices","Promise","resolve","reject","enumerateDevices","devices","some","device","kind"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA,iBAAiB,qBAAuB,wB;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wB;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAxC;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEAA,mBAAO,CAAC,4CAAD,CAAP,C,CAEA;;;AACA;AACA;AACA;AAEA;;AAEA,IAAIC,eAAJ;AACA,IAAIC,UAAJ;AACA,IAAIC,MAAJ;AACA,IAAIC,IAAI,GAAG,CAAX;AACA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,iBAAJ;AACA,IAAIC,cAAc,GAAG,KAArB;AACA,IAAIC,YAAY,GAAG,KAAnB;AACA,IAAIC,SAAS,GAAG,KAAhB;AACA,IAAIC,OAAO,GAAG,CAAd;AACA,IAAIC,aAAa,GAAG,KAApB;AACA,IAAMC,IAAI,GAAG;AACXC,OAAK,EAAE,EADI;AAEXC,UAAQ,EAAE;AAFC,CAAb;AAKAC,MAAM,CAACC,OAAP,CAAe,UAAAC,IAAI,EAAI;AACrBN,eAAa,GAAIO,YAAY,CAACC,OAAb,CAAqB,eAArB,KAAyC,MAA1D,CADqB,CAErB;;AACA,MAAGZ,cAAH,EAAkB;AAChBa,WAAO,CAACC,GAAR,CAAY,UAAZ;AACD;;AAEDD,SAAO,CAACC,GAAR,CAAYH,YAAY,CAACC,OAAb,CAAqB,qBAArB,CAAZ;AACAC,SAAO,CAACC,GAAR,CAAYH,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAZ,EARqB,CASrB;;AACA,MAAIF,IAAI,CAACK,IAAL,KAAcP,MAAM,CAACQ,QAAP,CAAgBC,IAA9B,IAAsCP,IAAI,CAACK,IAAL,KAAcP,MAAM,CAACQ,QAAP,CAAgBE,KAApE,IAA6ER,IAAI,CAACK,IAAL,KAAcP,MAAM,CAACQ,QAAP,CAAgBG,UAA/G,EAA2H;AACzHC,kBAAc;AACdC,0DAAA,GAAqBC,IAArB,CAA0B,UAACC,KAAD,EAAW;AACnC5B,gBAAU,GAAG4B,KAAb;AACD,KAFD;AAGAC,yEAAe,CAACC,KAAhB,GAAwBH,IAAxB,CAA6B,UAACI,SAAD,EAAe;AAC1C9B,YAAM,GAAG8B,SAAS,CAACC,EAAnB;AACAd,aAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,aAAO,CAACC,GAAR,CAAYlB,MAAZ;AACD,KAJD,WAIS,YAAM;AACbA,YAAM,GAAG,WAAT;AACD,KAND,EAMG0B,IANH,CAMQ,YAAK;AACXX,kBAAY,CAACiB,OAAb,CAAqB,QAArB,EAA+BhC,MAA/B,EADW,CAEX;;AACA,UAAGe,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,IAAjC,IAAyCD,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,GAA1E,IAAiF,CAACR,aAArF,EAAoG;AAClGC,YAAI,CAACC,KAAL,GAAaK,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;AACAiB,gBAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCP,KAAjC,GAAyCZ,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAzC;AACAiB,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAArC,GAA6CZ,YAAY,CAACC,OAAb,CAAqB,WAArB,CAA7C;AACAiB,gBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApC,GAA4CZ,YAAY,CAACC,OAAb,CAAqB,UAArB,CAA5C;AACAiB,gBAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CP,KAA1C,GAAkDZ,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAlD;AACAiB,gBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,UAAxC,GAAqD,MAArD;AACAH,gBAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CG,SAA3C,GAAuD,0BAAvD;;AAPkG,mDAQ9EJ,QAAQ,CAACK,sBAAT,CAAgC,cAAhC,CAR8E;AAAA;;AAAA;AAQlG,8DAAoE;AAAA,gBAA3DC,OAA2D;AAClEA,mBAAO,CAACJ,KAAR,CAAcK,OAAd,GAAsB,MAAtB;AACF;AAVkG;AAAA;AAAA;AAAA;AAAA;;AAWlGC,kBAAU;AAEVC,eAAO;AACPC,cAAM;AACP,OAlBU,CAmBX;;AACD,KA1BD;AA8BAV,YAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC,CAA8CK,OAA9C,GAAwD,MAAxD;AACAP,YAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CK,OAA1C,GAAoD,MAApD;AACAP,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCU,OAAvC,GAAiDF,OAAjD;AACAT,YAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CU,OAA1C,GAAoDF,OAApD;AACAT,YAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCW,QAAtC,GAAiDC,QAAjD;AAED;AACF,CApDD;;AAuDA,SAASJ,OAAT,CAAiBK,KAAjB,EAAwB;AACtB,MAAGA,KAAK,KAAKC,SAAb,EAAuB;AACrBD,SAAK,CAACE,cAAN;AACA,wBAAsBF,KAAK,CAACG,MAA5B;AAAA,QAAQC,EAAR,iBAAQA,EAAR;AAAA,QAAYxB,KAAZ,iBAAYA,KAAZ;AACAlB,QAAI,CAAC0C,EAAD,CAAJ,GAAWxB,KAAX;AACD;;AACDV,SAAO,CAACC,GAAR,CAAY,UAAZ;AACD;;AAED,SAAS4B,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,MAAGA,KAAK,KAAKC,SAAb,EAAuB;AACvBD,SAAK,CAACE,cAAN;AACC;;AACDhB,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,OAAtD;;AAEA,MAAIzB,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,GAAjC,IAAwCD,YAAY,CAACC,OAAb,CAAqB,QAArB,MAAmC,GAA/E,EAAoF;AAClF;AACAC,WAAO,CAACC,GAAR,CAAY,yBAAZ;AACAH,gBAAY,CAACiB,OAAb,CAAqB,QAArB,EAA+B,GAA/B;AACAvB,QAAI,CAACC,KAAL,GAAaK,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;AACAoC,iBAAa;AACbnB,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,MAAtD;AACA;AACD;;AAED,MAAMa,OAAO,GAAGpB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAhB;;AACA,MAAGmB,OAAO,CAAC1B,KAAR,KAAkB,EAArB,EAAwB;AACtBlB,QAAI,CAACE,QAAL,GAAgB0C,OAAO,CAAC1B,KAAxB;AACD;;AAED,MAAIlB,IAAI,CAACE,QAAL,KAAkB,EAAtB,EAA0B;AACxBM,WAAO,CAACC,GAAR,CAAY,WAAZ;AACAkC,iBAAa,GAFW,CAGxB;;AACA;AACD;;AACDT,QAAM,GA3BiB,CA4BvB;AACD;;AAED,SAASnB,cAAT,GAA0B;AACxB1B,iBAAe,GAAGwD,MAAM,CAACC,QAAP,CAAgBC,IAAhB,KAAyB,yBAA3C;AACD;;AAED,SAASb,MAAT,GAAkB;AAChBpC,SAAO;AACPU,SAAO,CAACC,GAAR,qBAAyBX,OAAzB;AACA0B,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,OAAtD;;AAIA,MAAI/B,IAAI,CAACE,QAAL,KAAkB,EAAtB,EAA0B;AACxByC,iBAAa,GADW,CAExB;;AACA;AACD;;AACD,MAAI3C,IAAI,CAACC,KAAL,KAAe,EAAf,IAAqBD,IAAI,CAACE,QAAL,KAAkB,EAA3C,EAA+C;AAC7C8C,oBAAgB;AAChB;AACD;;AAED,MAAGnD,SAAH,EAAc;AACZW,WAAO,CAACC,GAAR,4CAAgDwC,oEAAc,CAACC,MAA/D,kBAA6ElD,IAAI,CAACE,QAAlF;AACD,GAFD,MAEO;AACLM,WAAO,CAACC,GAAR,8DAAkEwC,oEAAc,CAACC,MAAjF;AACD;;AAEDC,sEAAc,CAACC,QAAf,CAAwBH,oEAAc,CAACC,MAAvC,EAA+ClD,IAAI,CAACE,QAApD,EACGe,IADH,CACQ,UAACI,SAAD,EAAe;AACnB,QAAIA,SAAS,CAACrB,IAAV,CAAeqD,GAAnB,EAAwB;AACtB,UAAIC,aAAa,GAAGjC,SAAS,CAACrB,IAAV,CAAeuD,QAAf,CAAwBC,UAAxB,CAAmCC,KAAvD;;AACA,UAAG,OAAOH,aAAP,KAAyB,WAA5B,EAAwC;AACtChD,oBAAY,CAACiB,OAAb,CAAqB,OAArB,EAA8B+B,aAA9B;AACAT,cAAM,CAACa,QAAP,CAAgB,IAAhB,EAAsB,GAAtB;AACAb,cAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,iBAAvB,CAHsC,CAItC;AACD,OALD,MAKO;AACLvB,gBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,YAAI4B,mDAAJ,CAAoB;AAClBC,eAAK,EAAE,qBADW;AAElBC,iBAAO,EAAE;AAFS,SAApB;AAID,OAbqB,CAetB;AACA;;AACD,KAjBD,MAiBO;AACLC,eAAS;AACTtC,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACAP,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA1C,CAAgDK,OAAhD,GAA0D,OAA1D;AACAP,cAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CqC,WAA1C,GAAwD,QAAxD;AACA,UAAIJ,mDAAJ,CAAoB;AAClBC,aAAK,EAAE,wBADW;AAElBC,eAAO,EAAE;AAFS,OAApB,EALK,CASL;AACD;AACF,GA9BH,WA8BW,UAACG,QAAD,EAAc;AACrBxD,WAAO,CAACC,GAAR,CAAYuD,QAAZ;;AACA,QAAIA,QAAQ,CAACC,KAAT,IAAkBD,QAAQ,CAACC,KAAT,CAAeC,UAAf,KAA8B,GAApD,EAAyD;AACvD1C,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA1C,CAAgDK,OAAhD,GAA0D,OAA1D;AACAP,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA1C,CAAgDqC,WAAhD,GAA8D,QAA9D;AACAvC,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0C0C,WAA1C,GAAuD,sGAAvD;AACA3D,aAAO,CAACC,GAAR,CAAY,sGAAZ,EAJuD,CAKvD;AACD,KAND,MAMO,CACL;AACD;AACF,GAzCH;AA0CD;;AAED,SAASqD,SAAT,GAAqB;AACnB9D,MAAI,CAACE,QAAL,GAAgB,EAAhB;AACD;AAED;AACA;AACA;;;AACA,SAASyC,aAAT,GAAyB;AACvB3C,MAAI,CAACC,KAAL,GAAauB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCP,KAA9C;;AACA,MAAIlB,IAAI,CAACC,KAAL,KAAe,EAAnB,EAAuB;AACrB+C,oBAAgB;AAChB;AACD;;AAED,MAAMoB,QAAQ,GAAGvB,MAAM,CAACwB,UAAP,IAAqB,GAAtC;AACA,MAAMC,QAAQ,GAAG,CAACF,QAAD,IAAavB,MAAM,CAACwB,UAAP,IAAqB,GAAnD;AACA,MAAME,SAAS,GAAG,CAACH,QAAD,IAAa,CAACE,QAAhC;AAEA,MAAME,UAAU,GAAGxD,sDAAA,CAAmB6B,MAAnB,CAAnB;AAEArC,SAAO,CAACC,GAAR,CAAY,eAAZ;;AACA,MAAGZ,SAAH,EAAa;AACXW,WAAO,CAACC,GAAR,CAAY,oBAAZ;AACD;;AACD0C,sEAAc,CAACsB,YAAf,CACEzE,IAAI,CAACC,KADP,EAEE,EAFF,EAGEV,MAHF,EAIEiF,UAAU,CAACE,OAJb,EAKE,EALF,EAMEF,UAAU,CAACG,EANb,EAOEP,QAPF,EAQEE,QARF,EASEC,SATF,EAUEjF,UAVF,EAWE,KAXF,EAYE,KAZF,EAaE2B,IAbF,CAaO,UAACI,SAAD,EAAe;AACpB,QAAIA,SAAS,CAACrB,IAAV,CAAe4E,UAAnB,EAA+B;AAC7BpE,aAAO,CAACC,GAAR,CAAY,wBAAZ;AACAoE,WAAK,CAACxD,SAAD,CAAL;AACD,KAHD,MAGO;AACL;AACA,UAAMyD,SAAS,GAAGtD,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAlB;AACA,UAAMC,SAAS,GAAGxD,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAlB;AACA,UAAME,SAAS,GAAGzD,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAlB;AACA,UAAMG,SAAS,GAAG1D,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAlB;AACAvD,cAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiC0D,UAAjC,CAA4CC,YAA5C,CAAyDN,SAAzD;AACAtD,cAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiC0D,UAAjC,CAA4CC,YAA5C,CAAyDJ,SAAzD;AACAxD,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0C0D,UAA1C,CAAqDC,YAArD,CAAkEH,SAAlE;AACAzD,cAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC0D,UAArC,CAAgDC,YAAhD,CAA6DF,SAA7D;AACA5E,kBAAY,CAACiB,OAAb,CAAqB,QAArB,EAA+BF,SAAS,CAACrB,IAAV,CAAekD,MAA9C;AACA1D,UAAI;AACJgB,aAAO,CAACC,GAAR,CAAY,kCAAZ;;AACA,UAAIH,YAAY,CAACC,OAAb,CAAqB,gBAArB,KAA0CZ,cAA9C,EAA6D;AAC3Da,eAAO,CAACC,GAAR,CAAY,4BAAZ;AACD,OAFD,MAEO;AACLD,eAAO,CAACC,GAAR,CAAY,+BAAZ;AACD;;AACDD,aAAO,CAACC,GAAR,CAAYjB,IAAZ,EAlBK,CAmBL;;AAnBK,kDAoBegC,QAAQ,CAACK,sBAAT,CAAgC,aAAhC,CApBf;AAAA;;AAAA;AAoBL,+DAAmE;AAAA,cAA1DC,OAA0D;AACjEA,iBAAO,CAACJ,KAAR,CAAcK,OAAd,GAAsB,OAAtB;AACF;AAtBK;AAAA;AAAA;AAAA;AAAA;;AAuBL,UAAIsD,aAAJ;AACA1F,oBAAc,GAAIW,YAAY,CAACC,OAAb,CAAqB,gBAArB,KAA0C,MAA5D;;AACA,UAAIZ,cAAc,IAAI,CAACI,aAAvB,EAAqC;AACnCsF,qBAAa,GAAGC,eAAe,EAA/B;AACA9E,eAAO,CAACC,GAAR,CAAY,+BAAZ;AACA8E,qBAAa,GAHsB,CAGlB;AAClB,OAJD,MAIO;AACL/E,eAAO,CAACC,GAAR,CAAY,+BAAZ;AACAH,oBAAY,CAACiB,OAAb,CAAqB,MAArB,EAA6BvB,IAAI,CAACC,KAAlC;AACAuB,gBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,UAAxC,GAAqD,MAArD;AACAH,gBAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CG,SAA3C,GAAuD,0BAAvD;AACA,YAAM4D,IAAI,GAAGhE,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAb;AACA,YAAMU,IAAI,GAAGjE,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAb;AACAvD,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC0D,UAArC,CAAgDC,YAAhD,CAA6DI,IAA7D;AACAhE,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC0D,UAArC,CAAgDC,YAAhD,CAA6DK,IAA7D,EARK,CAUL;AACD;;AACDjF,aAAO,CAACC,GAAR,oBAAwB4E,aAAxB;;AAEA,UAAG7F,IAAI,GAAC,CAAR,EAAU;AAERgB,eAAO,CAACC,GAAR,sBAA0BjB,IAA1B,GAFQ,CAGR;;AACA,YAAIkG,KAAK,GAAGlE,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAZ;AACA,YAAIkE,KAAK,GAAGnE,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAZ;AACA,YAAImE,OAAO,GAAGF,KAAK,CAACG,SAAN,CAAgBC,QAAhB,CAAyB,OAAzB,CAAd;AACAtF,eAAO,CAACC,GAAR,oBAAwBmF,OAAxB;;AACA,YAAI,CAACA,OAAD,IAAY,CAACjG,cAAjB,EAAgC;AAC9B6B,kBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA;AACD;;AACD,YAAGpC,cAAc,IAAI,CAACE,SAAtB,EAAgC;AAC9BkG,uBAAa;AACd,SAFD,MAEO,IAAIhG,aAAa,IAAI,CAACF,SAAtB,EAAgC;AACrCkG,uBAAa;AACd;AACF;;AAED,UAAG,CAACnG,YAAD,IAAiBJ,IAAI,GAAC,CAAzB,EAA2B;AACzB;AACD,OAhEI,CAkEL;;;AACAgC,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AAEAP,cAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CK,OAA5C,GAAsD,OAAtD,CArEK,CAuEL;;AAEA;AACN;AACA;AACA;AACM;AACD;AACF,GAhGD,WAgGS,UAACiC,QAAD,EAAc;AACrBxD,WAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BuD,QAA1B;;AACA,QAAIA,QAAQ,CAACC,KAAT,IAAkBD,QAAQ,CAACC,KAAT,CAAeC,UAAf,KAA8B,GAApD,EAAyD;AACvD,UAAIP,mDAAJ,CAAoB;AAClBC,aAAK,EAAE,wBADW;AAElBC,eAAO,EAAE;AAFS,OAApB,EADuD,CAKvD;AACD,KAND,MAMO,CACL;AACD;AACF,GA3GD;AA4GD;;AAED,SAAS0B,aAAT,GAAwB;AACtB,MAAIG,KAAK,GAAGlE,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;AAAA,MACEkE,KAAK,GAAGnE,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CADV;AAAA,MAEEuE,SAAS,GAAGxE,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAFd;AAAA,MAGEwE,SAAS,GAAGzE,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAHd;AAIEiE,OAAK,CAAChE,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACA4D,OAAK,CAACjE,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACAP,UAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCyE,QAAjC,GAA4C,IAA5C;AACAF,WAAS,CAAC9E,KAAV,GAAkBZ,YAAY,CAACC,OAAb,CAAqB,uBAArB,CAAlB;AACA0F,WAAS,CAAC/E,KAAV,GAAkB8E,SAAS,CAAC9E,KAA5B;AACH;;AAED,SAAS6E,aAAT,GAAwB;AACtBvE,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACAvB,SAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,SAAO,CAACC,GAAR,CAAYe,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAAjD;AACAM,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACAoB,sEAAc,CAACgD,cAAf,CACElD,oEAAc,CAACmD,SADjB,EAEEnD,oEAAc,CAACoD,QAFjB,EAGE7E,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAHvC,EAIE+B,oEAAc,CAACqD,IAJjB,EAKErD,oEAAc,CAACsD,cALjB,EAMEtD,oEAAc,CAAC1D,MANjB,EAOI0B,IAPJ,CAOS,UAACuF,SAAD,EAAe;AACpB,QAAGA,SAAS,CAACC,MAAV,KAAqB,SAArB,IAAkCD,SAAS,CAACtC,UAAV,KAAyB,GAA9D,EAAkE;AAChE1D,aAAO,CAACC,GAAR,CAAY+F,SAAS,CAACE,OAAtB;AACApG,kBAAY,CAACiB,OAAb,CAAqB,YAArB,EAAmCiF,SAAS,CAACxG,IAAV,CAAe2G,UAAlD;AACAC,sBAAgB;AACjB,KAJD,MAIO;AACLpG,aAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,aAAO,CAACC,GAAR,CAAY+F,SAAZ;AACA;AACD;AAEJ,GAlBD,EALsB,CAwBxB;AACA;AAEC;;AAED,SAASI,gBAAT,GAA4B;AAC1BpF,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACAoB,sEAAc,CAACC,QAAf,CACEH,oEAAc,CAACC,MADjB,EAEE,EAFF,EAGIjC,IAHJ,CAGS,UAACuF,SAAD,EAAc;AAEnB,QAAIA,SAAS,CAACxG,IAAV,CAAeqD,GAAf,IAAsBmD,SAAS,CAACxG,IAAV,CAAeuD,QAAf,CAAwBsD,OAAxB,KAAoC,KAA9D,EAAqE;AACnEC,oBAAc;AACf,KAFD,MAEO;AACLtG,aAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,aAAO,CAACC,GAAR,CAAY+F,SAAZ;AACA;AACD;AACJ,GAZD;AAaD;;AAED,SAASM,cAAT,GAAyB;AACvBC,UAAQ;AACRvF,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,MAAMiF,KAAK,GAAGxF,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAd,CAHuB,CAIvB;;AACAD,UAAQ,CAACyF,aAAT,CAAuB,WAAvB,EAAoCvF,KAApC,CAA0CwF,QAA1C,GAAqD,QAArD;AACAF,OAAK,CAACtF,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACA,MAAMoF,IAAI,GAAG3F,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAb;AACA,MAAM2F,WAAW,GAAG9G,YAAY,CAACC,OAAb,CAAqB,WAArB,CAApB;AACA,MAAM8G,UAAU,GAAG7F,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAnB;AACA4F,YAAU,CAACC,gBAAX,CAA4B,OAA5B,EAAqC,YAAW;AAC9C9F,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACA,QAAMyC,UAAU,GAAGxD,sDAAA,CAAmB6B,MAAnB,CAAnB;AACA,QAAMuB,QAAQ,GAAGvB,MAAM,CAACwB,UAAP,IAAqB,GAAtC;AACA,QAAMC,QAAQ,GAAG,CAACF,QAAD,IAAavB,MAAM,CAACwB,UAAP,IAAqB,GAAnD;AACA,QAAME,SAAS,GAAG,CAACH,QAAD,IAAa,CAACE,QAAhC;AACAnB,wEAAc,CAACsB,YAAf,CACEzE,IAAI,CAACC,KADP,EAEE,EAFF,EAGEV,MAHF,EAIEiF,UAAU,CAACE,OAJb,EAKE,EALF,EAMEF,UAAU,CAACG,EANb,EAOEP,QAPF,EAQEE,QARF,EASEC,SATF,EAUEjF,UAVF,EAWE,KAXF,EAYE,KAZF,EAaE,CAbF,EAcE2D,oEAAc,CAACC,MAdjB,EAeEjC,IAfF,CAeO,UAACI,SAAD,EAAe;AACpB,UAAGA,SAAS,CAAC6C,UAAV,IAAwB,GAA3B,EAA+B;AAC7B6C,gBAAQ;AACRvG,eAAO,CAACC,GAAR,CAAY,yBAAZ;AACAe,gBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACD;AACF,KArBD,EAN8C,CA4B9C;AACD,GA7BD;AA8BAP,UAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCG,SAAnC,GAA+CwF,WAA/C;AAEAD,MAAI,CAACG,gBAAL,CAAsB,QAAtB,EAAgC,UAAAC,CAAC,EAAI;AACjCA,KAAC,CAAC/E,cAAF;AACA,QAAMgF,GAAG,GAAGhG,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAAjD;AACAM,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACAvB,WAAO,CAACC,GAAR,oBAAwB+G,GAAxB;AACArE,wEAAc,CAACC,QAAf,CACEH,oEAAc,CAACC,MADjB,EAEEsE,GAFF,EAGIvG,IAHJ,CAGS,UAACuF,SAAD,EAAe;AACpB,UAAIA,SAAS,CAACxG,IAAV,CAAeqD,GAAnB,EAAwB;AACtB7C,eAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,eAAO,CAACC,GAAR,CAAY+F,SAAZ;AACArD,4EAAc,CAACsE,WAAf,CACExE,oEAAc,CAAC1D,MADjB,EAEE0D,oEAAc,CAAC0D,UAFjB,EAGI1F,IAHJ,CAGS,UAACyG,IAAD,EAAU;AACf,cAAIA,IAAI,CAACC,OAAT,EAAiB;AACfC,wBAAY;AACb;AACJ,SAPD;AASD,OAZD,MAYO;AAAE;AACPpG,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CK,OAA3C,GAAqD,OAArD;AACAP,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCoG,SAArC,GAA+C,mBAA/C;AACArH,eAAO,CAACC,GAAR,CAAY+F,SAAZ;AACAM,sBAAc;AACf;AACJ,KAtBD;AAuBH,GA5BD;AA+BD;;AAED,SAASc,YAAT,GAAuB;AACrB,MAAIE,SAAJ;AACA3E,sEAAc,CAACyE,YAAf,CACE3E,oEAAc,CAACmD,SAAf,GAA2B,GAA3B,GAAiCnD,oEAAc,CAACoD,QADlD,EAEEpD,oEAAc,CAACqD,IAFjB,EAGErD,oEAAc,CAACsD,cAHjB,EAIItF,IAJJ,CAIS,UAACyG,IAAD,EAAU;AACf,QAAGA,IAAI,CAACK,WAAL,KAAqB,GAAxB,EAA4B;AAC1B5E,0EAAc,CAAC6E,sBAAf,CACE/E,oEAAc,CAACqD,IADjB,EAEErF,IAFF,CAEO,UAACuF,SAAD,EAAe;AACpB,YAAGA,SAAS,CAACtC,UAAV,IAAwB,GAA3B,EAAgC;AAC9B4D,mBAAS,GAAGtB,SAAS,CAACE,OAAtB;AACA,cAAMuB,iBAAiB,GAAGhF,oEAAc,CAACqD,IAAf,GAAsB,KAAtB,GAA8BwB,SAAxD;AACA,cAAMI,gBAAgB,GAAGrF,MAAM,CAACsF,IAAP,CAAYF,iBAAZ,CAAzB;AACA9E,8EAAc,CAACiF,eAAf,CACEF,gBADF,EAEIjH,IAFJ,CAES,UAACyG,IAAD,EAAU;AACf,gBAAGA,IAAI,CAACxD,UAAL,IAAmB,GAAtB,EAA0B;AACxBmE,yBAAW;AACZ,aAFD,MAEO;AACLC,8BAAgB;AACjB;AACF,WARH;AASD,SAbD,MAaO;AACLA,0BAAgB;AACjB;AACF,OAnBD;AAoBD,KArBD,MAqBO;AACLA,sBAAgB;AACjB;AACF,GA7BH;AA8BD;;AAED,SAASD,WAAT,GAAuB;AACrBxI,WAAS,GAAG,IAAZ;AACA2B,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACAP,UAAQ,CAACyF,aAAT,CAAuB,WAAvB,EAAoCvF,KAApC,CAA0CwF,QAA1C,GAAqD,QAArD;AACA,MAAMF,KAAK,GAAGxF,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAd,CAJqB,CAKrB;;AACA,MAAM8G,YAAY,GAAG/G,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAArB;AACAuF,OAAK,CAACtF,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACAwG,cAAY,CAAC3G,SAAb;AAUAJ,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuC6F,gBAAvC,CAAwD,OAAxD,EAAiE,YAAW;AAE1EtH,QAAI,CAACC,KAAL,GAAagD,oEAAc,CAACqD,IAA5B;;AACA,QAAI3G,cAAJ,EAAmB;AACjBK,UAAI,CAACE,QAAL,GAAgB+C,oEAAc,CAACuF,SAA/B;AACD,KAFD,MAEO;AACLxI,UAAI,CAACE,QAAL,GAAgBsB,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAArD;AACD;;AACDV,WAAO,CAACC,GAAR,mCAAuCT,IAAI,CAACC,KAA5C,gBAAuDD,IAAI,CAACE,QAA5D;AACAyC,iBAAa,GAT6D,CASzD;AAClB,GAVD;AAWD;;AAED,SAAS2F,gBAAT,GAA4B;AAC1BzI,WAAS,GAAG,KAAZ;AACA2B,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,MAAMiF,KAAK,GAAGxF,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAd;AACA,MAAM8G,YAAY,GAAG/G,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAArB;AACAuF,OAAK,CAACtF,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACAwG,cAAY,CAAC3G,SAAb;AAED;;AAED,SAASiD,KAAT,CAAexD,SAAf,EAA0B;AACxBf,cAAY,CAACiB,OAAb,CAAqB,eAArB,YACKF,SAAS,CAACrB,IAAV,CAAesG,IAAf,CAAoB5G,iBADzB,cAC8C2B,SAAS,CAACrB,IAAV,CAAesG,IAAf,CAAoBmC,gBADlE;AAEAnI,cAAY,CAACiB,OAAb,CAAqB,WAArB,EAAkCF,SAAS,CAACrB,IAAV,CAAesG,IAAf,CAAoBC,cAAtD;AACAjG,cAAY,CAACiB,OAAb,CAAqB,QAArB,EAA+BvB,IAAI,CAACC,KAApC;AACAK,cAAY,CAACiB,OAAb,CAAqB,WAArB,EAAkCF,SAAS,CAACrB,IAAV,CAAesG,IAAf,CAAoBK,UAAtD;AACArG,cAAY,CAACiB,OAAb,CAAqB,QAArB,EAA+BF,SAAS,CAACrB,IAAV,CAAekD,MAA9C;AAEAK,UAAQ,CAAClC,SAAD,CAAR;AACD;;AAED,SAASkC,QAAT,CAAkBlC,SAAlB,EAA6B;AAC3Bb,SAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,SAAO,CAACC,GAAR,CAAYY,SAAS,CAACrB,IAAV,CAAeuD,QAAf,CAAwBsD,OAApC;;AACA,UAAQxF,SAAS,CAACrB,IAAV,CAAeuD,QAAf,CAAwBsD,OAAhC;AACE,SAAK,UAAL;AACErG,aAAO,CAACC,GAAR,CAAY,wBAAZ,EADF,CACwC;;AACtC;;AACF,SAAK,UAAL;AACEiI,kBAAY,CAACrH,SAAD,CAAZ;AACA;;AACF,SAAK,QAAL;AACEsH,oBAAc,CAACC,QAAf,CAAwB,CAAC,cAAD,CAAxB;AACA;;AACF,SAAK,KAAL;AACED,oBAAc,CAACC,QAAf,CAAwB,CAAC,OAAD,CAAxB;AACA;;AACF,SAAK,UAAL;AACE,UAAMC,UAAU,GAAIvI,YAAY,CAACC,OAAb,CAAqB,gBAArB,KAA0C,MAA9D;;AACA,UAAGsI,UAAH,EAAe;AACb,YAAIhF,OAAO,GAAGyB,eAAe,EAA7B;AACA9E,eAAO,CAACC,GAAR,CAAYoD,OAAZ;AACArC,gBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApC,GAA4C+B,oEAAc,CAACuF,SAA3D;AACAxI,YAAI,CAACE,QAAL,GAAgBsB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApD;AACAV,eAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,eAAO,CAACC,GAAR,CAAYT,IAAI,CAACE,QAAjB;AACAgC,cAAM;AACP,OARD,MAQO,IAAGrC,SAAH,EAAc;AACnB2B,gBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApC,GAA4CM,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAAjF;AACAlB,YAAI,CAACE,QAAL,GAAgBsB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApD;AACAV,eAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,eAAO,CAACC,GAAR,CAAYT,IAAI,CAACE,QAAjB;AACAgC,cAAM;AACP,OANM,MAOF;AACH,YAAM4G,aAAa,GAAGtH,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAtB;AACAvD,gBAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCoG,SAAxC,GAAoDvH,YAAY,CAACC,OAAb,CAAqB,eAArB,CAApD;AACAiB,gBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoC0D,UAApC,CAA+CC,YAA/C,CAA4D0D,aAA5D;AACAtH,gBAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsC0C,WAAtC,GAAoD,UAApD;AACA3C,gBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;;AALG,oDAMiBP,QAAQ,CAACK,sBAAT,CAAgC,aAAhC,CANjB;AAAA;;AAAA;AAMH,iEAAmE;AAAA,gBAA1DC,OAA0D;AACjEA,mBAAO,CAACJ,KAAR,CAAcK,OAAd,GAAsB,MAAtB;AACD;AARE;AAAA;AAAA;AAAA;AAAA;;AAAA,oDASiBP,QAAQ,CAACK,sBAAT,CAAgC,cAAhC,CATjB;AAAA;;AAAA;AASH,iEAAoE;AAAA,gBAA3DC,QAA2D;AAClEA,oBAAO,CAACJ,KAAR,CAAcK,OAAd,GAAsB,OAAtB;AACD;AAXE;AAAA;AAAA;AAAA;AAAA;AAYJ;;AACH;AA3CF;AA6CD;;AAED,SAAS2G,YAAT,CAAsBrH,SAAtB,EAAiC;AAC/B,MAAI0H,IAAI,CAACC,SAAL,CAAe3H,SAAS,CAACrB,IAAV,CAAeuD,QAAf,CAAwBC,UAAvC,KAAsD,IAA1D,EAAgE;AAC9DL,wEAAc,CAACC,QAAf,CAAwB/B,SAAS,CAACrB,IAAV,CAAekD,MAAvC,EAA+C,EAA/C,EAAmDjC,IAAnD,CAAwD,UAACuF,SAAD,EAAe;AACrE,UAAI,CAACnF,SAAS,CAACrB,IAAV,CAAesG,IAAf,CAAoB2C,QAAzB,EAAmC,CACjC;AACD,OAFD,MAEO;AACL1F,gBAAQ,CAACiD,SAAD,CAAR;AACD;AACF,KAND,WAMS,UAACxC,QAAD,EAAc;AACrBxD,aAAO,CAACC,GAAR,CAAYuD,QAAZ;;AACA,UAAIA,QAAQ,CAACC,KAAT,IAAkBD,QAAQ,CAACC,KAAT,CAAeC,UAAf,KAA8B,GAApD,EAAyD;AACvD1D,eAAO,CAACC,GAAR,CAAY,0EAAZ;AACD,OAFD,MAEO,CACL;AACD;AACF,KAbD;AAcD,GAfD,MAeO;AACLD,WAAO,CAACC,GAAR,CAAY,mBAAZ;AACAe,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACE,QAAI4B,mDAAJ,CAAoB;AAClBC,WAAK,EAAE,wBADW;AAElBC,aAAO,EAAE;AAFS,KAApB;;AAIF,SAAK,IAAIqF,CAAT,IAAc7H,SAAS,CAACrB,IAAV,CAAeuD,QAAf,CAAwBC,UAAtC,EAAkD;AAChD/D,WAAK,CAAC0J,IAAN,CAAW,CAAC9H,SAAS,CAACrB,IAAV,CAAeuD,QAAf,CAAwBC,UAAxB,CAAmC0F,CAAnC,CAAZ;AACD;;AACD1I,WAAO,CAACC,GAAR,CAAYhB,KAAZ,EAVK,CAWL;;AACA,QAAI,CAAC4B,SAAS,CAACrB,IAAV,CAAesG,IAAf,CAAoB2C,QAAzB,EAAmC;AACjC3I,kBAAY,CAACiB,OAAb,CAAqB,UAArB,EAAiC,OAAjC;AACD,KAdI,CAeL;;AACD;AACF;;AAED,SAASyB,gBAAT,GAA4B;AAC1BxB,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,MAAI4B,mDAAJ,CAAoB;AACdC,SAAK,EAAE,wBADO;AAEdC,WAAO,EAAE;AAFK,GAApB,EAF0B,CAM1B;AACD;;AAED,IAAIuF,UAAU,GAAG5H,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAjB,C,CAEA;;AACA,IAAI4H,IAAI,GAAG7H,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAX;AACA,IAAI6H,IAAI,GAAG9H,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAX,C,CAEA;;AACA,IAAI8H,IAAI,GAAG/H,QAAQ,CAACK,sBAAT,CAAgC,OAAhC,EAAyC,CAAzC,CAAX,C,CAEA;;AACAyH,IAAI,CAACE,OAAL,GAAe,YAAW;AACxBhI,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACA,MAAI0H,WAAW,GAAG,gBAAlB;AACAtG,sEAAc,CAACuG,YAAf,GAA8BzI,IAA9B,CAAmC,UAACuF,SAAD,EAAe;AAChD,QAAGA,SAAS,CAACtC,UAAV,IAAwB,GAA3B,EAA+B;AAC7BuF,iBAAW,GAAGjD,SAAS,CAACxG,IAAV,CAAe,CAAf,EAAkB2J,QAAhC;AACAnI,cAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCG,SAAnC,GAA+C6H,WAAW,CAACG,QAAZ,EAA/C,CAF6B,CAG7B;;AACApI,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,MAAtD;AACD;AACF,GAPD;AAQAqH,YAAU,CAAC1H,KAAX,CAAiBK,OAAjB,GAA2B,OAA3B,CAXwB,CAYxB;AACD,CAbD;;AAeAsH,IAAI,CAACG,OAAL,GAAe,YAAW;AACxBhI,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACA,MAAI0H,WAAW,GAAG,gBAAlB;AACAtG,sEAAc,CAACuG,YAAf,GAA8BzI,IAA9B,CAAmC,UAACuF,SAAD,EAAe;AAChD,QAAGA,SAAS,CAACtC,UAAV,IAAwB,GAA3B,EAA+B;AAC7BuF,iBAAW,GAAGjD,SAAS,CAACxG,IAAV,CAAe,CAAf,EAAkB2J,QAAhC;AACAnI,cAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCG,SAAnC,GAA+C6H,WAAW,CAACG,QAAZ,EAA/C,CAF6B,CAG7B;;AACApI,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,MAAtD;AACD;AACF,GAPD;AAQAqH,YAAU,CAAC1H,KAAX,CAAiBK,OAAjB,GAA2B,OAA3B,CAXwB,CAYxB;AACD,CAbD,C,CAeA;;;AACAwH,IAAI,CAACC,OAAL,GAAe,YAAW;AACxBJ,YAAU,CAAC1H,KAAX,CAAiBK,OAAjB,GAA2B,MAA3B;AACD,CAFD,C,CAIA;;;AACAc,MAAM,CAAC2G,OAAP,GAAiB,UAASlH,KAAT,EAAgB;AAC/B,MAAIA,KAAK,CAACG,MAAN,IAAgB2G,UAApB,EAAiC;AAC/BA,cAAU,CAAC1H,KAAX,CAAiBK,OAAjB,GAA2B,MAA3B;AACD;AACF,CAJD;AAMA;;;AACAP,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC6F,gBAArC,CAAsD,OAAtD,EAA+DuC,gBAA/D;AACArI,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC6F,gBAArC,CAAsD,UAAtD,EAAkE,YAAK;AACnE9F,UAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,CAAkDK,OAAlD,GAA4D,MAA5D;AACH,CAFD;;AAIA,SAAS8H,gBAAT,GAA2B;AACvBrI,UAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,CAAkDK,OAAlD,GAA4D,OAA5D;AACH;;AAGD,CAAC,YAAU;AACT,MAAI7B,QAAQ,GAAGsB,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAf;AACF,MAAIqI,eAAe,GAAGtI,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAtB;AAEE,MAAIsI,UAAU,GAAG;AACbC,cAAU,EAAExI,QAAQ,CAACyF,aAAT,CAAuB,sBAAvB,CADC;AAEbgD,aAAS,EAAEzI,QAAQ,CAACyF,aAAT,CAAuB,yBAAvB,CAFE;AAGbiD,aAAS,EAAE1I,QAAQ,CAACyF,aAAT,CAAuB,yBAAvB,CAHE;AAIbkD,WAAO,EAAE3I,QAAQ,CAACyF,aAAT,CAAuB,uBAAvB,CAJI;AAKfmD,SAAK,EAAE5I,QAAQ,CAACyF,aAAT,CAAuB,qBAAvB;AALQ,GAAjB;AAQA,MAAIoD,OAAO,GAAG;AACVL,cAAU,EAAE,sBAAW;AACnB,UAAI9J,QAAQ,CAACgB,KAAT,CAAeoJ,MAAf,IAAyB,CAA7B,EAAiC;AAC7B,eAAO,IAAP;AACH;AACJ,KALS;AAMVL,aAAS,EAAE,qBAAW;AAClB,UAAIM,KAAK,GAAG,iBAAZ,CADkB,CACa;;AAE/B,UAAIA,KAAK,CAACC,IAAN,CAAWtK,QAAQ,CAACgB,KAApB,CAAJ,EAAiC;AAC7B,eAAO,IAAP;AACH;AACJ,KAZS;AAaVgJ,aAAS,EAAE,qBAAW;AAClB,UAAIK,KAAK,GAAG,iBAAZ,CADkB,CACa;;AAE/B,UAAIA,KAAK,CAACC,IAAN,CAAWtK,QAAQ,CAACgB,KAApB,CAAJ,EAAiC;AAC7B,eAAO,IAAP;AACH;AACJ,KAnBS;AAoBViJ,WAAO,EAAE,mBAAW;AAChB,UAAII,KAAK,GAAG,oBAAZ,CADgB,CACkB;;AAElC,UAAIA,KAAK,CAACC,IAAN,CAAWtK,QAAQ,CAACgB,KAApB,CAAJ,EAAiC;AAC7B,eAAO,IAAP;AACH;AACJ,KA1BS;AA2BZkJ,SAAK,EAAE,iBAAW;AACZ,UAAIlK,QAAQ,CAACgB,KAAT,IAAkB4I,eAAe,CAAC5I,KAAtC,EAA8C;AAC1C,eAAO,IAAP;AACH;AACJ;AA/BS,GAAd,CAZS,CA8CT;;AACFhB,UAAQ,CAACoH,gBAAT,CAA0B,OAA1B,EAAmC,YAAW;AACxC;AACAmD,eAAW,CAAEJ,OAAO,CAACL,UAAR,EAAF,EAAwBD,UAAU,CAACC,UAAnC,CAAX,CAFwC,CAIxC;;AACAS,eAAW,CAAEJ,OAAO,CAACJ,SAAR,EAAF,EAAuBF,UAAU,CAACE,SAAlC,CAAX,CALwC,CAOxC;;AACAQ,eAAW,CAAEJ,OAAO,CAACH,SAAR,EAAF,EAAuBH,UAAU,CAACG,SAAlC,CAAX,CARwC,CAUxC;;AACAO,eAAW,CAAEJ,OAAO,CAACF,OAAR,EAAF,EAAqBJ,UAAU,CAACI,OAAhC,CAAX,CAXwC,CAY5C;;AACIM,eAAW,CAAEJ,OAAO,CAACD,KAAR,EAAF,EAAmBL,UAAU,CAACK,KAA9B,CAAX,CAbwC,CAe5C;;AACA,QAAIM,QAAQ,CAACX,UAAU,CAACC,UAAZ,EAAwB,OAAxB,CAAR,IACMU,QAAQ,CAACX,UAAU,CAACE,SAAZ,EAAuB,OAAvB,CADd,IAEMS,QAAQ,CAACX,UAAU,CAACG,SAAZ,EAAuB,OAAvB,CAFd,IAGMQ,QAAQ,CAACX,UAAU,CAACI,OAAZ,EAAqB,OAArB,CAHd,IAIMO,QAAQ,CAACX,UAAU,CAACK,KAAZ,EAAmB,OAAnB,CAJlB,EAKM;AACEO,cAAQ,CAACzK,QAAD,EAAW,OAAX,CAAR;AACAyK,cAAQ,CAACb,eAAD,EAAkB,OAAlB,CAAR;AACAc,iBAAW,CAAC1K,QAAD,EAAW,SAAX,CAAX;AACA0K,iBAAW,CAACd,eAAD,EAAkB,SAAlB,CAAX;AACP,KAVD,MAWK;AACHc,iBAAW,CAAC1K,QAAD,EAAW,OAAX,CAAX;AACA0K,iBAAW,CAACd,eAAD,EAAkB,OAAlB,CAAX;AACAa,cAAQ,CAACzK,QAAD,EAAW,SAAX,CAAR;AACAyK,cAAQ,CAACb,eAAD,EAAkB,SAAlB,CAAR;AACD;AACA,GAjCH;AAmCAA,iBAAe,CAACxC,gBAAhB,CAAiC,OAAjC,EAA0C,YAAW;AAC/C;AACAmD,eAAW,CAAEJ,OAAO,CAACL,UAAR,EAAF,EAAwBD,UAAU,CAACC,UAAnC,CAAX,CAF+C,CAI/C;;AACAS,eAAW,CAAEJ,OAAO,CAACJ,SAAR,EAAF,EAAuBF,UAAU,CAACE,SAAlC,CAAX,CAL+C,CAO/C;;AACAQ,eAAW,CAAEJ,OAAO,CAACH,SAAR,EAAF,EAAuBH,UAAU,CAACG,SAAlC,CAAX,CAR+C,CAU/C;;AACAO,eAAW,CAAEJ,OAAO,CAACF,OAAR,EAAF,EAAqBJ,UAAU,CAACI,OAAhC,CAAX,CAX+C,CAYnD;;AACIM,eAAW,CAAEJ,OAAO,CAACD,KAAR,EAAF,EAAmBL,UAAU,CAACK,KAA9B,CAAX,CAb+C,CAenD;;AACA,QAAIM,QAAQ,CAACX,UAAU,CAACC,UAAZ,EAAwB,OAAxB,CAAR,IACMU,QAAQ,CAACX,UAAU,CAACE,SAAZ,EAAuB,OAAvB,CADd,IAEMS,QAAQ,CAACX,UAAU,CAACG,SAAZ,EAAuB,OAAvB,CAFd,IAGMQ,QAAQ,CAACX,UAAU,CAACI,OAAZ,EAAqB,OAArB,CAHd,IAIMO,QAAQ,CAACX,UAAU,CAACK,KAAZ,EAAmB,OAAnB,CAJlB,EAKM;AACEO,cAAQ,CAACzK,QAAD,EAAW,OAAX,CAAR;AACAyK,cAAQ,CAACb,eAAD,EAAkB,OAAlB,CAAR;AACAc,iBAAW,CAAC1K,QAAD,EAAW,SAAX,CAAX;AACA0K,iBAAW,CAACd,eAAD,EAAkB,SAAlB,CAAX;AACP,KAVD,MAWK;AACHc,iBAAW,CAAC1K,QAAD,EAAW,OAAX,CAAX;AACA0K,iBAAW,CAACd,eAAD,EAAkB,OAAlB,CAAX;AACAa,cAAQ,CAACzK,QAAD,EAAW,SAAX,CAAR;AACAyK,cAAQ,CAACb,eAAD,EAAkB,SAAlB,CAAR;AACD;AACA,GAjCH;;AAmCE,WAASW,WAAT,CAAqBJ,OAArB,EAA8BrG,QAA9B,EAAwC;AACpC,QAAGqG,OAAH,EAAY;AACdM,cAAQ,CAAC3G,QAAD,EAAW,OAAX,CAAR;AACA4G,iBAAW,CAAC5G,QAAD,EAAW,SAAX,CAAX;AACD,KAHG,MAIC;AACH4G,iBAAW,CAAC5G,QAAD,EAAW,OAAX,CAAX;AACA2G,cAAQ,CAAC3G,QAAD,EAAW,SAAX,CAAR;AACD;AACA;;AAED,WAAS2G,QAAT,CAAkBE,EAAlB,EAAsBC,SAAtB,EAAiC;AAC7B,QAAID,EAAE,CAAChF,SAAP,EAAkB;AACdgF,QAAE,CAAChF,SAAH,CAAakF,GAAb,CAAiBD,SAAjB;AACH,KAFD,MAGK;AACDD,QAAE,CAACC,SAAH,IAAgB,MAAMA,SAAtB;AACH;AACJ;;AAED,WAASF,WAAT,CAAqBC,EAArB,EAAyBC,SAAzB,EAAoC;AAChC,QAAID,EAAE,CAAChF,SAAP,EACQgF,EAAE,CAAChF,SAAH,CAAamF,MAAb,CAAoBF,SAApB,EADR,KAGQD,EAAE,CAACC,SAAH,GAAeD,EAAE,CAACC,SAAH,CAAaG,OAAb,CAAqB,IAAIC,MAAJ,CAAW,YAAYJ,SAAS,CAACK,KAAV,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B,GAA1B,CAAZ,GAA6C,SAAxD,EAAmE,IAAnE,CAArB,EAA+F,GAA/F,CAAf;AACX;;AAED,WAASV,QAAT,CAAkBG,EAAlB,EAAsBC,SAAtB,EAAiC;AAC7B,QAAID,EAAE,CAAChF,SAAP,EAAkB;AACd,aAAOgF,EAAE,CAAChF,SAAH,CAAaC,QAAb,CAAsBgF,SAAtB,CAAP;AACH,KAFD,MAGK;AACD,UAAII,MAAJ,CAAW,UAAUJ,SAAV,GAAsB,OAAjC,EAA0C,IAA1C,EAAgDN,IAAhD,CAAqDK,EAAE,CAACC,SAAxD;AACH;AACJ;AAEF,CAzJD;AA0JA;;;AAEA,IAAMO,aAAa,GAAG7J,QAAQ,CAACyF,aAAT,CAAuB,YAAvB,CAAtB;AACA,IAAMqE,YAAY,GAAG9J,QAAQ,CAACyF,aAAT,CAAuB,WAAvB,CAArB;AACA,IAAMV,cAAc,GAAG/E,QAAQ,CAACyF,aAAT,CAAuB,iBAAvB,CAAvB;AACA,IAAMsE,cAAc,GAAG/J,QAAQ,CAACyF,aAAT,CAAuB,iBAAvB,CAAvB;AACA,IAAMuE,eAAe,GAAGhK,QAAQ,CAACyF,aAAT,CAAuB,kBAAvB,CAAxB;AACA,IAAMwE,eAAe,GAAGjK,QAAQ,CAACyF,aAAT,CAAuB,kBAAvB,CAAxB;AACA,IAAM/G,QAAQ,GAAGsB,QAAQ,CAACyF,aAAT,CAAuB,WAAvB,CAAjB;AACA,IAAMjB,SAAS,GAAGxE,QAAQ,CAACyF,aAAT,CAAuB,YAAvB,CAAlB;AACA,IAAMhB,SAAS,GAAGzE,QAAQ,CAACyF,aAAT,CAAuB,YAAvB,CAAlB;AAEAoE,aAAa,CAAC/D,gBAAd,CAA+B,OAA/B,EAAwC,YAAW;AACjDhH,cAAY,CAACiB,OAAb,CAAqB,WAArB,EAAkC8J,aAAa,CAACnK,KAAhD;AACD,CAFD;AAIAoK,YAAY,CAAChE,gBAAb,CAA8B,OAA9B,EAAuC,YAAW;AAChDhH,cAAY,CAACiB,OAAb,CAAqB,UAArB,EAAiC+J,YAAY,CAACpK,KAA9C;AACD,CAFD;AAIAqF,cAAc,CAACe,gBAAf,CAAgC,OAAhC,EAAyC,YAAW;AAClDhH,cAAY,CAACiB,OAAb,CAAqB,gBAArB,EAAuCgF,cAAc,CAACrF,KAAtD;AACD,CAFD;AAIAqK,cAAc,CAACjE,gBAAf,CAAgC,OAAhC,EAAyC,UAAUC,CAAV,EAAa;AAClD;AACA,MAAMmE,IAAI,GAAGxL,QAAQ,CAACyL,YAAT,CAAsB,MAAtB,MAAkC,UAAlC,GAA+C,MAA/C,GAAwD,UAArE;AACAzL,UAAQ,CAAC0L,YAAT,CAAsB,MAAtB,EAA8BF,IAA9B,EAHkD,CAIlD;;AACA,OAAK7F,SAAL,CAAegG,MAAf,CAAsB,cAAtB;AACH,CAND;AAOAL,eAAe,CAAClE,gBAAhB,CAAiC,OAAjC,EAA0C,UAAUC,CAAV,EAAa;AACnD;AACA,MAAMmE,IAAI,GAAG1F,SAAS,CAAC2F,YAAV,CAAuB,MAAvB,MAAmC,UAAnC,GAAgD,MAAhD,GAAyD,UAAtE;AACA3F,WAAS,CAAC4F,YAAV,CAAuB,MAAvB,EAA+BF,IAA/B,EAHmD,CAInD;;AACA,OAAK7F,SAAL,CAAegG,MAAf,CAAsB,cAAtB;AACH,CAND;AAOAJ,eAAe,CAACnE,gBAAhB,CAAiC,OAAjC,EAA0C,UAAUC,CAAV,EAAa;AACnD;AACA,MAAMmE,IAAI,GAAGzF,SAAS,CAAC0F,YAAV,CAAuB,MAAvB,MAAmC,UAAnC,GAAgD,MAAhD,GAAyD,UAAtE;AACA1F,WAAS,CAAC2F,YAAV,CAAuB,MAAvB,EAA+BF,IAA/B,EAHmD,CAInD;;AACA,OAAK7F,SAAL,CAAegG,MAAf,CAAsB,cAAtB;AACH,CAND,E,CAOA;;AAEA,SAASvG,eAAT,GAA2B;AACzB,MAAIwG,QAAQ,GAAG,CAAf;AACA,MAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYzL,YAAZ,CAAX;AAAA,MACI4I,CAAC,GAAG6C,IAAI,CAACzB,MADb;;AAEA,SAAQpB,CAAC,EAAT,EAAc;AACV,QAAI+C,GAAG,GAAGF,IAAI,CAAC7C,CAAD,CAAd;;AACA,QAAG+C,GAAG,CAACC,UAAJ,CAAe,GAAf,CAAH,EAAuB;AACrB,UAAIC,GAAG,GAAGpD,IAAI,CAACqD,KAAL,CAAWH,GAAX,CAAV,CADqB,CAErB;;AACA,yCAAyBD,MAAM,CAACK,OAAP,CAAeF,GAAf,CAAzB,qCAA8C;AAAzC;AAAA,YAAKG,GAAL;AAAA,YAAUpL,KAAV;;AACHZ,oBAAY,CAACiB,OAAb,CAAqB+K,GAArB,EAA0BpL,KAA1B;;AACA,YAAGoL,GAAG,KAAK,uBAAX,EAAmC;AACjC9L,iBAAO,CAACC,GAAR,kBAAsB6L,GAAtB,eAA8BpL,KAA9B;AACA4K,kBAAQ,GAAG5K,KAAX;AACAvB,wBAAc,GAAG,IAAjB;AACAW,sBAAY,CAACiB,OAAb,CAAqB,gBAArB,EAAuC5B,cAAvC;AACD;AACF;AACF;AAEA;;AACL,SAAOmM,QAAP;AACD;;AAGDS,CAAC,CAAE,WAAF,CAAD,CAAiBC,KAAjB,CAAuB,YAAW;AAChC;AACA,MAAGD,CAAC,CAAE,IAAF,CAAD,CAAUE,GAAV,MAAmB,EAAtB,EAAyB;AACzBF,KAAC,CAAE,IAAF,CAAD,CAAUG,QAAV,CAAmB,OAAnB,EAA4BC,WAA5B,CAAyC,UAAzC,EAAqD,QAArD,EAA+D,GAA/D,EAAoE,eAApE;AACC,GAFD,MAEO;AACPJ,KAAC,CAAE,IAAF,CAAD,CAAUG,QAAV,CAAmB,OAAnB,EAA4BC,WAA5B,CAAyC,QAAzC,EAAmD,UAAnD,EAA+D,GAA/D,EAAoE,eAApE;AACC;AAEA,CARH;;AAWI,SAAS3K,UAAT,GAAsB;AACpBuK,GAAC,CAAE,WAAF,CAAD,CAAiBK,IAAjB,CAAsB,YAAW;AAC/B,QAAGL,CAAC,CAAE,IAAF,CAAD,CAAUE,GAAV,MAAmB,EAAtB,EAAyB;AACvBF,OAAC,CAAE,IAAF,CAAD,CAAUG,QAAV,CAAmB,OAAnB,EAA4BC,WAA5B,CAAyC,UAAzC,EAAqD,QAArD,EAA+D,GAA/D,EAAoE,eAApE;AACC,KAFH,MAES;AACPJ,OAAC,CAAE,IAAF,CAAD,CAAUG,QAAV,CAAmB,OAAnB,EAA4BC,WAA5B,CAAyC,QAAzC,EAAmD,UAAnD,EAA+D,GAA/D,EAAoE,eAApE;AACC;AACJ,GAND;AAOD;;AAEL,SAAS5F,QAAT,GAAmB;AACjBvF,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,MAAI8K,OAAO,GAAG,EAAd,CAFiB,CAIjB;;AACA,MAAIC,CAAC,GAAGC,WAAW,CAAC,YAAW;AAE/BF,WAAO,IAAG,CAAV;AAEErL,YAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCG,SAAlC,GAA6C,wBAAwBiL,OAAxB,GAAkC,IAA/E,CAJ6B,CAM7B;;AACA,QAAIA,OAAO,GAAG,CAAd,EAAiB;AACfG,mBAAa,CAACF,CAAD,CAAb;AACAtL,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACAP,cAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCG,SAAlC,GAA8C,EAA9C;AACD;AACF,GAZkB,EAYhB,IAZgB,CAAnB;AAaD,C;;;;;;;;;;;;;ACj9BD,CAAE,UAASqL,CAAT,EAAYC,CAAZ,EAAe;AACf,4CAAmBC,OAAnB,MAA8B,eAAe,OAAOC,MAApD,GACIF,CAAC,CAACC,OAAD,CADL,GAEI,QACAE,iCAAO,CAAC,OAAD,CAAD,oCAAcH,CAAd;AAAA;AAAA;AAAA,oGADN,GAEAA,SAJJ;AAKD,CANA,CAME,IANF,EAMQ,UAASD,CAAT,EAAY;AACnB;;AACA,WAAS/D,CAAT,CAAW+D,CAAX,EAAcC,CAAd,EAAiB;AACf,QAAI,EAAED,CAAC,YAAYC,CAAf,CAAJ,EAAuB,MAAM,IAAII,SAAJ,CAAc,mCAAd,CAAN;AACxB;;AACD,WAASC,CAAT,CAAWN,CAAX,EAAcC,CAAd,EAAiB;AACf,SAAK,IAAI3F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2F,CAAC,CAAC5C,MAAtB,EAA8B/C,CAAC,EAA/B,EAAmC;AACjC,UAAI2B,CAAC,GAAGgE,CAAC,CAAC3F,CAAD,CAAT;AACC2B,OAAC,CAACsE,UAAF,GAAetE,CAAC,CAACsE,UAAF,IAAgB,CAAC,CAAjC,EACGtE,CAAC,CAACuE,YAAF,GAAiB,CAAC,CADrB,EAEE,WAAWvE,CAAX,KAAiBA,CAAC,CAACwE,QAAF,GAAa,CAAC,CAA/B,CAFF,EAGE1B,MAAM,CAAC2B,cAAP,CAAsBV,CAAtB,EAAyB/D,CAAC,CAACoD,GAA3B,EAAgCpD,CAAhC,CAHF;AAID;AACF;;AACD,WAAS0E,CAAT,CAAWX,CAAX,EAAcC,CAAd,EAAiB3F,CAAjB,EAAoB;AAClB,WAAO2F,CAAC,IAAIK,CAAC,CAACN,CAAC,CAACY,SAAH,EAAcX,CAAd,CAAN,EAAwB3F,CAAC,IAAIgG,CAAC,CAACN,CAAD,EAAI1F,CAAJ,CAA9B,EAAsC0F,CAA7C;AACD;;AACD,WAASC,CAAT,CAAWD,CAAX,EAAcC,CAAd,EAAiB;AACf,QAAI,cAAc,OAAOA,CAArB,IAA0B,SAASA,CAAvC,EAA0C,MAAM,IAAII,SAAJ,CAAc,oDAAd,CAAN;AACzCL,KAAC,CAACY,SAAF,GAAc7B,MAAM,CAAC8B,MAAP,CAAcZ,CAAC,IAAIA,CAAC,CAACW,SAArB,EAAgC;AAAEE,iBAAW,EAAE;AAAE7M,aAAK,EAAE+L,CAAT;AAAYS,gBAAQ,EAAE,CAAC,CAAvB;AAA0BD,oBAAY,EAAE,CAAC;AAAzC;AAAf,KAAhC,CAAf,EACEP,CAAC,IAAI3F,CAAC,CAAC0F,CAAD,EAAIC,CAAJ,CADR;AAED;;AACD,WAASc,CAAT,CAAWf,CAAX,EAAc;AACZ,WAAO,CAACe,CAAC,GAAGhC,MAAM,CAACiC,cAAP,GACRjC,MAAM,CAACkC,cADC,GAER,UAASjB,CAAT,EAAY;AACV,aAAOA,CAAC,CAACkB,SAAF,IAAenC,MAAM,CAACkC,cAAP,CAAsBjB,CAAtB,CAAtB;AACD,KAJE,EAIAA,CAJA,CAAP;AAKD;;AACD,WAAS1F,CAAT,CAAW0F,CAAX,EAAcC,CAAd,EAAiB;AACf,WAAO,CAAC3F,CAAC,GACPyE,MAAM,CAACiC,cAAP,IACA,UAAShB,CAAT,EAAYC,CAAZ,EAAe;AACb,aAAQD,CAAC,CAACkB,SAAF,GAAcjB,CAAf,EAAmBD,CAA1B;AACD,KAJI,EAIFA,CAJE,EAICC,CAJD,CAAP;AAKD;;AACD,WAASkB,CAAT,CAAWnB,CAAX,EAAcC,CAAd,EAAiB;AACf,WAAO,CAACA,CAAD,IAAO,oBAAmBA,CAAnB,KAAwB,cAAc,OAAOA,CAApD,GACF,UAASD,CAAT,EAAY;AACX,UAAI,KAAK,CAAL,KAAWA,CAAf,EAAkB,MAAM,IAAIoB,cAAJ,CAAmB,2DAAnB,CAAN;AAClB,aAAOpB,CAAP;AACD,KAHD,CAGGA,CAHH,CADG,GAKHC,CALJ;AAMD;;AACD,WAASoB,CAAT,CAAWrB,CAAX,EAAc;AACZ,WAAO,YAAY,OAAOA,CAA1B;AACD;;AACD,WAASsB,CAAT,CAAWtB,CAAX,EAAcC,CAAd,EAAiB3F,CAAjB,EAAoB;AAClB,QAAI2B,CAAC,GAAG,IAAIsF,SAAS,CAAClE,MAAd,IAAwB,KAAK,CAAL,KAAW2C,CAAnC,GAAuCA,CAAvC,GAA2C,KAAnD;AAAA,QACEM,CAAC,GAAG,IAAIiB,SAAS,CAAClE,MAAd,IAAwB,KAAK,CAAL,KAAW4C,CAAnC,GAAuCA,CAAvC,GAA2C,IADjD;AAAA,QAEEU,CAAC,GAAG,IAAIY,SAAS,CAAClE,MAAd,IAAwB,KAAK,CAAL,KAAW/C,CAAnC,GAAuCA,CAAvC,GAA2C,EAFjD;AAAA,QAGEyG,CAAC,GAAGxM,QAAQ,CAACiN,aAAT,CAAuBvF,CAAvB,CAHN;;AAIA,QAAI,SAASqE,CAAb,EAAgB;AACd,UAAIa,CAAC,GAAG,SAAJA,CAAI,CAASlB,CAAT,EAAY;AAClB,YAAID,CAAJ;AACA,SAAC,CAACA,CAAC,GAAGC,CAAL,EAAQhB,UAAR,CAAmB,IAAnB,IAA2Be,CAAC,CAACyB,WAAF,EAA3B,GAA6C,KAAKC,MAAL,CAAY1B,CAAZ,CAA9C,KAAiEpK,MAAjE,GACImL,CAAC,CAAC1G,gBAAF,CAAmB4F,CAAnB,EAAsB,UAASD,CAAT,EAAY;AAChCM,WAAC,CAACL,CAAD,CAAD,CAAKD,CAAL,EAAQe,CAAR;AACD,SAFD,CADJ,GAIIA,CAAC,CAACpC,YAAF,CAAesB,CAAf,EAAkBK,CAAC,CAACL,CAAD,CAAnB,CAJJ;AAKD,OAPD;;AAQA,WAAK,IAAIoB,CAAT,IAAcf,CAAd;AAAiBa,SAAC,CAACE,CAAD,CAAD;AAAjB;AACD;;AACD,WACE,IAAIV,CAAC,CAACtD,MAAN,IACEsD,CAAC,CAACgB,OAAF,CAAU,UAAS3B,CAAT,EAAY;AACpB,kBAAY,OAAOA,CAAnB,GAAuBe,CAAC,CAACa,WAAF,CAAcrN,QAAQ,CAACsN,cAAT,CAAwB7B,CAAxB,CAAd,CAAvB,GAAmEe,CAAC,CAACa,WAAF,CAAc5B,CAAd,CAAnE;AACD,KAFD,CADF,EAIAe,CALF;AAOD;;AACD,MAAIe,CAAC,GAAI,YAAW;AAChB,aAAS7B,CAAT,CAAWD,CAAX,EAAc;AACZ/D,OAAC,CAAC,IAAD,EAAOgE,CAAP,CAAD,EACG,KAAK8B,OAAL,GAAe/B,CADlB,EAEEqB,CAAC,CAACrB,CAAC,CAACrJ,KAAH,CAAD,KAAe,KAAKA,KAAL,GAAaqJ,CAAC,CAACrJ,KAA9B,CAFF,EAGG,KAAKqL,YAAL,GAAoB,CAAC,CAAD,KAAOhC,CAAC,CAACgC,YAHhC,EAIEX,CAAC,CAACrB,CAAC,CAACpJ,OAAH,CAAD,KAAiB,KAAKA,OAAL,GAAeoJ,CAAC,CAACpJ,OAAlC,CAJF,EAKEoJ,CAAC,CAACiC,SAAF,KAAgB,aAAa,OAAOjC,CAAC,CAACiC,SAAtB,IAAmCZ,CAAC,CAACrB,CAAC,CAACiC,SAAH,CAApD,IACK,KAAKA,SAAL,GAAiBjC,CAAC,CAACiC,SADxB,GAEK,KAAKA,SAAL,GAAiB,MAPxB,EAQG,KAAKC,IAAL,GAAY,IARf,EASG,KAAKxF,QAAL,GAAgB,KAAKyF,UAAL,EATnB;AAUD;;AACD,WACExB,CAAC,CAACV,CAAD,EAAI,CACH;AACEZ,SAAG,EAAE,YADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAI+L,CAAJ;AAAA,YACEC,CAAC,GAAG,IADN;AAAA,YAEE3F,CAAC,GAAGgH,CAAC,CAAC,KAAD,EAAQ;AACX,mBAAO,OADI;AAEXc,eAAK,EAAE,iBAAW;AAChBnC,aAAC,CAACoC,KAAF;AACD;AAJU,SAAR,CAFP;AAQA,eACG/H,CAAC,CAAC3F,SAAF,GACC,iPADF,EAEC,KAAKuN,IAAL,GAAYZ,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,CAFd,EAGCtB,CAAC,GAAG,WAAW,KAAKiC,SAAhB,GAA4B,YAA5B,GAA2C,EAHhD,EAIC,KAAKK,SAAL,GAAiBhB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO,qBAAT;AAAgC7M,eAAK,EAAEuL;AAAvC,SAAR,EAAoD,CACrEsB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA4B,CAACA,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA8B,CAAChH,CAAD,EAAI,KAAK4H,IAAT,CAA9B,CAAF,CAA5B,CADoE,CAApD,CAJnB,EAOA,KAAKI,SARP;AAUD;AArBH,KADG,EAwBH;AACEjD,SAAG,EAAE,QADP;AAEEpL,WAAK,EAAE,eAAS+L,CAAT,EAAY;AACjB,YAAIC,CAAJ;AAAA,YACE3F,CADF;AAAA,YAEE2B,CAFF;AAAA,YAGEqE,CAAC,GAAG,IAAIiB,SAAS,CAAClE,MAAd,IAAwB,KAAK,CAAL,KAAW2C,CAAnC,GAAuCA,CAAvC,GAA2CzL,QAAQ,CAACgO,IAH1D;AAIA,aAAKR,OAAL,CAAaS,YAAb,IAA6B,KAAKT,OAAL,CAAaS,YAAb,CAA0B,IAA1B,CAA7B,EACElC,CAAC,CAACsB,WAAF,CAAc,KAAKlF,QAAnB,CADF,EAEE,KAAKqF,OAAL,CAAaU,WAAb,IAA4B,KAAKV,OAAL,CAAaU,WAAb,CAAyB,IAAzB,CAF9B,EAGE,WAAW,KAAKR,SAAhB,KACIhC,CAAC,GAAG,KAAKvD,QAAV,EACAT,CAAC,GAAG,CADJ,EAEDrG,MAAM,CAAC8M,qBAAP,CAA6B,SAAS1C,CAAT,GAAa;AACxC,iBAAO/D,CAAP,IACKrG,MAAM,CAAC+M,oBAAP,CAA4B3C,CAA5B,GAAgC1F,CAAC,IAAIA,CAAC,CAAC2F,CAAD,CAD3C,KAEMhE,CAAC,IAAI,EAAN,EAAYgE,CAAC,CAACxL,KAAF,CAAQmO,OAAR,GAAkB,CAAC3G,CAAC,GAAG,GAAL,EAAUU,QAAV,EAA9B,EAAqD/G,MAAM,CAAC8M,qBAAP,CAA6B1C,CAA7B,CAF1D;AAGD,SAJD,CAHF,CAHF;AAWD;AAlBH,KAxBG,EA4CH;AACEX,SAAG,EAAE,SADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,aAAKqO,SAAL,CAAeO,aAAf,CAA6BC,WAA7B,CAAyC,KAAKR,SAA9C,GACE,KAAKP,OAAL,CAAagB,UAAb,IAA2B,KAAKhB,OAAL,CAAagB,UAAb,CAAwB,IAAxB,CAD7B;AAED;AALH,KA5CG,EAmDH;AACE1D,SAAG,EAAE,OADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAIgM,CAAJ;AAAA,YACE3F,CADF;AAAA,YAEE2B,CAFF;AAAA,YAGE+D,CAAC,GAAG,IAHN;AAIA,aAAK+B,OAAL,CAAaiB,WAAb,IAA4B,KAAKjB,OAAL,CAAaiB,WAAb,CAAyB,IAAzB,CAA5B,EACE,KAAKf,SAAL,GACI,WAAW,KAAKA,SAAhB,KACEhC,CAAC,GAAG,KAAKqC,SAAV,EACAhI,CAAC,GAAG,aAAW;AACd0F,WAAC,CAACiD,OAAF;AACD,SAHA,EAIAhH,CAAC,GAAG,GAJJ,EAKDrG,MAAM,CAAC8M,qBAAP,CAA6B,SAAS1C,CAAT,GAAa;AACxC/D,WAAC,IAAI,CAAL,IACKrG,MAAM,CAAC+M,oBAAP,CAA4B3C,CAA5B,GAAgC1F,CAAC,IAAIA,CAAC,CAAC2F,CAAD,CAD3C,KAEMhE,CAAC,IAAI,EAAN,EAAYgE,CAAC,CAACxL,KAAF,CAAQmO,OAAR,GAAkB,CAAC3G,CAAC,GAAG,GAAL,EAAUU,QAAV,EAA9B,EAAqD/G,MAAM,CAAC8M,qBAAP,CAA6B1C,CAA7B,CAF1D;AAGD,SAJD,CANA,CADJ,GAYI,KAAKiD,OAAL,EAbN;AAcD;AArBH,KAnDG,CAAJ,CAAD,EA2EAhD,CA5EF;AA8ED,GA3FK,EAAR;AAAA,MA4FEiD,CAAC,GAAI,YAAW;AACd,aAAS5I,CAAT,CAAW0F,CAAX,EAAc;AACZ,UAAIC,CAAJ;AACA,aAAOhE,CAAC,CAAC,IAAD,EAAO3B,CAAP,CAAD,EAAY,CAAC2F,CAAC,GAAGkB,CAAC,CAAC,IAAD,EAAOJ,CAAC,CAACzG,CAAD,CAAD,CAAK6I,IAAL,CAAU,IAAV,EAAgBnD,CAAhB,CAAP,CAAN,EAAkCoD,cAAlC,EAAZ,EAAgEnD,CAAC,CAACoD,MAAF,EAAhE,EAA4EpD,CAAnF;AACD;;AACD,WACEA,CAAC,CAAC3F,CAAD,EAAIwH,CAAJ,CAAD,EACAnB,CAAC,CAACrG,CAAD,EAAI,CACH;AACE+E,SAAG,EAAE,gBADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAI+L,CAAJ;AAAA,YACEC,CAAC,GAAGqB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA2B,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA0B,CAAC,KAAK3K,KAAN,CAA1B,CAAF,CAA3B,CADP;;AAEA,YAAK,KAAKuL,IAAL,CAAUN,WAAV,CAAsB3B,CAAtB,GAA0B,KAAK+B,YAApC,EAAmD;AACjD,cAAI1H,CAAC,GAAGgH,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,CAAT;AACChH,WAAC,CAAC3F,SAAF,GAAc,KAAKiC,OAApB,EAA+BoJ,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,EAAsC,CAAChH,CAAD,CAAtC,CAApC;AACD,SAHD,MAGO0F,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAAsC,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA4B,CAAC,KAAK1K,OAAN,CAA5B,CAAF,CAAtC,CAAL;;AACP,aAAKsL,IAAL,CAAUN,WAAV,CAAsB3B,CAAtB,GAA0B,KAAKiC,IAAL,CAAUN,WAAV,CAAsB5B,CAAtB,CAA1B;AACD;AAVH,KADG,CAAJ,CADD,EAeA1F,CAhBF;AAkBD,GAvBG,EA5FN;AAAA,MAoHEgJ,CAAC,GAAI,YAAW;AACd,aAAShJ,CAAT,CAAW0F,CAAX,EAAc;AACZ,UAAIC,CAAJ;AACA,aACEhE,CAAC,CAAC,IAAD,EAAO3B,CAAP,CAAD,EACC,CAAC2F,CAAC,GAAGkB,CAAC,CAAC,IAAD,EAAOJ,CAAC,CAACzG,CAAD,CAAD,CAAK6I,IAAL,CAAU,IAAV,EAAgBnD,CAAhB,CAAP,CAAN,EAAkCuD,UAAlC,GAA+ClC,CAAC,CAACrB,CAAC,CAACuD,UAAH,CAAD,GAAkBvD,CAAC,CAACuD,UAApB,GAAiC,MADjF,EAECtD,CAAC,CAACuD,eAAF,GAAoBnC,CAAC,CAACrB,CAAC,CAACwD,eAAH,CAAD,GAAuBxD,CAAC,CAACwD,eAAzB,GAA2C,MAFhE,EAGAvD,CAAC,CAACmD,cAAF,EAHA,EAIAnD,CAAC,CAACoD,MAAF,EAJA,EAKApD,CANF;AAQD;;AACD,WACEA,CAAC,CAAC3F,CAAD,EAAIwH,CAAJ,CAAD,EACAnB,CAAC,CAACrG,CAAD,EAAI,CACH;AACE+E,SAAG,EAAE,aADP;AAEEpL,WAAK,EAAE,eAAS+L,CAAT,EAAY;AAChB,oBAAYA,CAAC,CAACX,GAAd,IAAqB,OAAOW,CAAC,CAACyD,OAA/B,IAA2C,KAAKxO,MAAL,EAA3C;AACD;AAJH,KADG,EAOH;AACEoK,SAAG,EAAE,QADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAI+L,CAAC,GAAG,KAAK0D,KAAL,CAAWzP,KAAnB;AACA,eAAO+L,CAAP,KAAa,KAAKqC,KAAL,IAAc,KAAKN,OAAL,CAAa3M,QAAb,IAAyB,KAAK2M,OAAL,CAAa3M,QAAb,CAAsB,IAAtB,EAA4B4K,CAA5B,CAApD;AACD;AALH,KAPG,EAcH;AACEX,SAAG,EAAE,gBADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAIqG,CAAC,GAAG,IAAR;AAAA,YACE0F,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA2B,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA0B,CAAC,KAAK3K,KAAN,CAA1B,CAAF,CAA3B,CADP;AAEA,aAAKuL,IAAL,CAAUN,WAAV,CAAsB5B,CAAtB,GACG,KAAK0D,KAAL,GAAapC,CAAC,CAAC,OAAD,EAAU;AACvB7C,cAAI,EAAE,MADiB;AAEvB,mBAAO,OAFgB;AAGvBkF,qBAAW,EAAE,KAAKH,eAHK;AAIvBjE,eAAK,EAAE,eAASS,CAAT,EAAYC,CAAZ,EAAe;AACpB3F,aAAC,CAACsJ,WAAF,CAAc5D,CAAd,EAAiBC,CAAjB;AACD;AANsB,SAAV,CADjB;AASA,YAAIA,CAAJ;AAAA,YACEhE,CAAC,GAAGqF,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAAsC,CACzC,KAAKoC,KADoC,EAEzCpC,CAAC,CACC,QADD,EAEC;AACE,mBAAO,QADT;AAEEc,eAAK,EAAE,iBAAW;AAChB9H,aAAC,CAACrF,MAAF;AACD;AAJH,SAFD,EAQC,CAAC,KAAKsO,UAAN,CARD,CAFwC,CAAtC,CADP;;AAcA,YAAI,KAAKvB,YAAT,EAAuB;AACrB,cAAI1B,CAAC,GAAGgB,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,CAAT;AACChB,WAAC,CAAC3L,SAAF,GAAc,KAAKiC,OAApB,EAA+BqJ,CAAC,GAAGqB,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,EAAsC,CAAChB,CAAD,EAAIrE,CAAJ,CAAtC,CAApC;AACD,SAHD,MAGOgE,CAAC,GAAGqB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAAsC,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA4B,CAAC,KAAK1K,OAAN,CAA5B,CAAF,EAA+CqF,CAA/C,CAAtC,CAAL;;AACP,aAAKiG,IAAL,CAAUN,WAAV,CAAsB5B,CAAtB,GAA0B,KAAKkC,IAAL,CAAUN,WAAV,CAAsB3B,CAAtB,CAA1B;AACD;AAjCH,KAdG,CAAJ,CADD,EAmDA3F,CApDF;AAsDD,GAlEG,EApHN;AAAA,MAuLEuJ,CAAC,GAAI,YAAW;AACd,aAASvJ,CAAT,CAAW0F,CAAX,EAAc;AACZ,UAAIC,CAAJ;AACA,aACEhE,CAAC,CAAC,IAAD,EAAO3B,CAAP,CAAD,EACC,CAAC2F,CAAC,GAAGkB,CAAC,CAAC,IAAD,EAAOJ,CAAC,CAACzG,CAAD,CAAD,CAAK6I,IAAL,CAAU,IAAV,EAAgBnD,CAAhB,CAAP,CAAN,EAAkC8D,YAAlC,GAAiDzC,CAAC,CAACrB,CAAC,CAAC8D,YAAH,CAAD,GAAoB9D,CAAC,CAAC8D,YAAtB,GAAqC,IADvF,EAEC7D,CAAC,CAAC8D,aAAF,GAAkB1C,CAAC,CAACrB,CAAC,CAAC+D,aAAH,CAAD,GAAqB/D,CAAC,CAAC+D,aAAvB,GAAuC,OAF1D,EAGA9D,CAAC,CAACmD,cAAF,EAHA,EAIAnD,CAAC,CAACoD,MAAF,EAJA,EAKApD,CANF;AAQD;;AACD,WACEA,CAAC,CAAC3F,CAAD,EAAIwH,CAAJ,CAAD,EACAnB,CAAC,CAACrG,CAAD,EAAI,CACH;AACE+E,SAAG,EAAE,gBADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAI+L,CAAJ;AAAA,YACEC,CAAC,GAAG,IADN;AAAA,YAEE3F,CAAC,GAAGgH,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA2B,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA0B,CAAC,KAAK3K,KAAN,CAA1B,CAAF,CAA3B,CAFP;;AAGA,YAAK,KAAKuL,IAAL,CAAUN,WAAV,CAAsBtH,CAAtB,GAA0B,KAAK0H,YAApC,EAAmD;AACjD,cAAI/F,CAAC,GAAGqF,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,CAAT;AACCrF,WAAC,CAACtH,SAAF,GAAc,KAAKiC,OAApB,EAA+BoJ,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,EAAsC,CAACrF,CAAD,CAAtC,CAApC;AACD,SAHD,MAGO+D,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAAsC,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA4B,CAAC,KAAK1K,OAAN,CAA5B,CAAF,CAAtC,CAAL;;AACPoJ,SAAC,CAAC4B,WAAF,CACEN,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA8B,CAC7BA,CAAC,CACC,QADD,EAEC;AACE,mBAAO,QADT;AAEEc,eAAK,EAAE,iBAAW;AAChBnC,aAAC,CAACoC,KAAF,IAAWpC,CAAC,CAAC8B,OAAF,CAAUiC,QAAV,IAAsB/D,CAAC,CAAC8B,OAAF,CAAUiC,QAAV,CAAmB/D,CAAnB,CAAjC;AACD;AAJH,SAFD,EAQC,CAAC,KAAK6D,YAAN,CARD,CAD4B,EAW7BxC,CAAC,CACC,QADD,EAEC;AACE,mBAAO,SADT;AAEEc,eAAK,EAAE,iBAAW;AAChBnC,aAAC,CAACoC,KAAF,IAAWpC,CAAC,CAAC8B,OAAF,CAAUkC,SAAV,IAAuBhE,CAAC,CAAC8B,OAAF,CAAUkC,SAAV,CAAoBhE,CAApB,CAAlC;AACD;AAJH,SAFD,EAQC,CAAC,KAAK8D,aAAN,CARD,CAX4B,CAA9B,CADH,GAwBE,KAAK7B,IAAL,CAAUN,WAAV,CAAsBtH,CAAtB,CAxBF,EAyBE,KAAK4H,IAAL,CAAUN,WAAV,CAAsB5B,CAAtB,CAzBF;AA0BD;AApCH,KADG,CAAJ,CADD,EAyCA1F,CA1CF;AA4CD,GAxDG,EAvLN;;AAgPC0F,GAAC,CAACkE,KAAF,GAAUhB,CAAX,EACGlD,CAAC,CAACmE,OAAF,GAAYN,CADf,EAEG7D,CAAC,CAACoE,MAAF,GAAWd,CAFd,EAGGtD,CAAC,CAACqE,OAAF,GAAY,OAHf,EAIEtF,MAAM,CAAC2B,cAAP,CAAsBV,CAAtB,EAAyB,YAAzB,EAAuC;AAAE/L,SAAK,EAAE,CAAC;AAAV,GAAvC,CAJF;AAKD,CAlUA,CAAD,C;;;;;;;;;;;ACAA,iBAAiB,qBAAuB,yB;;;;;;;;;;;;;;;;;;;ICAlCqQ,e;;;;;;;WAEF,iBAAQ;AACJ,aAAOC,KAAK,CAAC,oBAAD,CAAL,CAA4BvQ,IAA5B,CAAiC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAAzC,CAAP;AACH;;;;;;AAIL,IAAMtQ,eAAe,GAAG,IAAIoQ,eAAJ,EAAxB;AAEepQ,8EAAf,E;;;;;;;;;;;;;;;;;;;;ACVA,IAAMuQ,WAAW,GAAG;AAChB,kBAAgB,kBADA;AAEhB,0BAAwB;AAFR,CAApB;AAKA,IAAMC,YAAY,GAAG;AACjB,kBAAgB,kBADC;AAEjB,mBAAiB,YAAYrR,YAAY,CAACC,OAAb,CAAqB,OAArB;AAFZ,CAArB;;AAKA,IAAMqR,YAAY,GAAG,SAAfA,YAAe;AAAA,SAAO;AACxB,oBAAgB,kBADQ;AAExB,4BAAwB,4GAFA;AAGxB,qBAAiB,YAAYtR,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHL,GAAP;AAAA,CAArB;;AAMA,IAAMsR,GAAG,GAAG,8BAAZ;AACA,IAAMC,cAAc,GAAG,8BAAvB;AAEO,IAAMC,cAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,WAEI,qBAAYxS,MAAZ,EAAoBoH,UAApB,EAAgC;AAC5B,UAAM3G,IAAI,GAAG;AACTgS,gBAAQ,EAAEzS,MADD;AAET0S,kBAAU,EAAEC,QAAQ,CAACvL,UAAD,CAFX;AAGTwL,eAAO,EAAE,CAAC,CAAD,EAAG,CAAH;AAHA,OAAb;AAKA3R,aAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,aAAO,CAACC,GAAR,CAAYT,IAAZ;AACA,aAAOwR,KAAK,WAAIK,GAAJ,wCAA4C;AACpDO,cAAM,EAAE,MAD4C;AAEpD5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAehJ,IAAf,CAF8C;AAGpDqS,eAAO,EAAEX;AAH2C,OAA5C,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AAfL;AAAA;AAAA,WAiBI,wBAAea,IAAf,EAAqBC,QAArB,EAA+BrS,QAA/B,EAAyCoG,IAAzC,EAA+CkM,MAA/C,EAAuDlR,EAAvD,EAA2D;AACvD,UAAMtB,IAAI,GAAG;AACToG,iBAAS,EAAEkM,IADF;AAETjM,gBAAQ,EAAEkM,QAFD;AAGTrS,gBAAQ,EAAEA,QAHD;AAIToG,YAAI,EAAEA,IAJG;AAKTC,sBAAc,EAAEiM,MALP;AAMTR,gBAAQ,EAAE1Q;AAND,OAAb;AAQA,aAAOkQ,KAAK,WAAIK,GAAJ,sCAA0C;AAClDO,cAAM,EAAE,MAD0C;AAElD5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAehJ,IAAf,CAF4C;AAGlDqS,eAAO,EAAEX;AAHyC,OAA1C,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA/BL;AAAA;AAAA,WAgCI,sBAAanL,IAAb,EAAmBmM,WAAnB,EAAgCnR,EAAhC,EAAoCoD,OAApC,EAA6CgO,SAA7C,EAAwD/N,EAAxD,EAA4D6N,MAA5D,EAAoEG,MAApE,EACIC,OADJ,EACaC,MADb,EACqBC,YADrB,EACmCC,WADnC,EACgDC,WADhD,EAC6D9P,MAD7D,EACqE;AACjE,UAAMlD,IAAI,GAAG;AACTsG,YAAI,EAAEA,IADG;AAETc,mBAAW,EAAEqL,WAFJ;AAGTQ,kBAAU,EAAE;AACRC,kBAAQ,EAAE5R,EADF;AAERoD,iBAAO,EAAEA,OAFD;AAGRC,YAAE,EAAEA,EAHI;AAIRP,kBAAQ,EAAEoO,MAJF;AAKRlO,kBAAQ,EAAEqO,MALF;AAMRpO,mBAAS,EAAEqO,OANH;AAORO,mBAAS,EAAEN,MAPH;AAQRO,4BAAkB,EAAEN,YARZ;AASRO,8BAAoB,EAAEN;AATd;AAHH,OAAb;AAeA,UAAIC,WAAW,KAAK,EAAhB,IAAsBA,WAAW,KAAKzQ,SAA1C,EAAqDvC,IAAI,CAACgT,WAAL,GAAmBA,WAAnB;AACrD,UAAI9P,MAAM,KAAK,EAAX,IAAiBA,MAAM,KAAKX,SAAhC,EAA2CvC,IAAI,CAACkD,MAAL,GAAcA,MAAd;AAC3C1C,aAAO,CAACC,GAAR,wBAA4BuS,WAA5B;AACAxS,aAAO,CAACC,GAAR,mBAAuBuS,WAAvB;AACAxS,aAAO,CAACC,GAAR,CAAYT,IAAZ;AACA,aAAOwR,KAAK,WAAIK,GAAJ,qCAAyC;AACjDO,cAAM,EAAE,MADyC;AAEjD5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAehJ,IAAf,CAF2C;AAGjDqS,eAAO,EAAEX;AAHwC,OAAzC,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA3DL;AAAA;AAAA,WA4DI,kBAAS6B,IAAT,EAAetT,IAAf,EAAqB;AACjB,UAAMyM,GAAG,GAAG;AACR6G,YAAI,EAAEA,IADE;AAERtT,YAAI,EAAEA;AAFE,OAAZ;AAIAQ,aAAO,CAACC,GAAR,CAAYgM,GAAZ;AACA,aAAO+E,KAAK,WAAIK,GAAJ,gCAAoC;AAC5CO,cAAM,EAAE,MADoC;AAE5C5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAeyD,GAAf,CAFsC;AAG5C4F,eAAO,EAAEX;AAHmC,OAApC,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AAvEL;AAAA;AAAA,WAyEI,oBAAW;AACP,aAAOD,KAAK,WAAIK,GAAJ,mBAAL,CAA6B5Q,IAA7B,CAAkC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAA1C,CAAP;AACH;AA3EL;AAAA;AAAA,WA6EI,2BAAkB8B,GAAlB,EAAuB;AACnB,UAAI7Q,EAAE,GAAG,EAAT;;AACA,WAAK,IAAIwG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqK,GAAG,CAACjJ,MAAxB,EAAgCpB,CAAC,EAAjC,EAAqC;AACjCxG,UAAE,IAAI,SAAS6Q,GAAG,CAACrK,CAAD,CAAZ,GAAkB,GAAxB;AACH;;AAEDxG,QAAE,GAAGA,EAAE,CAAC8Q,KAAH,CAAS,CAAT,EAAY,CAAC,CAAb,CAAL;AAEA,aAAOhC,KAAK,WAAIK,GAAJ,oCAAiCnP,EAAjC,EAAL,CAA4CzB,IAA5C,CAAiD,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAAzD,CAAP;AACH;AAtFL;AAAA;AAAA,WAwFI,uBAAcgC,IAAd,EAAoB;AAChB,UAAMzT,IAAI,GAAG;AACT0T,mBAAW,EAAED;AADJ,OAAb;AAGA,aAAOjC,KAAK,WAAIK,GAAJ,4BAAgC;AACxCO,cAAM,EAAE,MADgC;AAExC5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAehJ,IAAf,CAFkC;AAGxCqS,eAAO,EAAET,YAAY;AAHmB,OAAhC,CAAL,CAIJ3Q,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AAjGL;AAAA;AAAA,WAmGI,sBAAaa,IAAb,EAAmBrS,KAAnB,EAA0BmH,WAA1B,EAAuC;AACnC,UAAMpH,IAAI,GAAG;AACTsS,YAAI,EAAEA,IADG;AAETrS,aAAK,EAAEA,KAFE;AAGTmH,mBAAW,EAAE8K,QAAQ,CAAC9K,WAAD;AAHZ,OAAb;AAKA,aAAOoK,KAAK,WAAIM,cAAJ,mCAAkD;AAC1DM,cAAM,EAAE,MADkD;AAE1D5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAehJ,IAAf,CAFoD;AAG1DqS,eAAO,EAAEX;AAHiD,OAAlD,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA9GL;AAAA;AAAA,WAgHI,yBAAgBkC,IAAhB,EAAsBC,QAAtB,EAAgCC,aAAhC,EAA+C;AAC3CrT,aAAO,CAACC,GAAR,CAAYkR,YAAZ;AACA,UAAM3R,IAAI,GAAG;AACT2T,YAAI,EAAEA,IADG;AAETC,gBAAQ,EAAEA,QAFD;AAGTC,qBAAa,EAAEA;AAHN,OAAb;AAKA,UAAMC,IAAI,aAAMhC,cAAN,gCAAV,CAP2C,CAQ3C;AACA;;AACA,aAAON,KAAK,CAACsC,IAAD,EAAO;AACf1B,cAAM,EAAE,MADO;AAEf5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAehJ,IAAf,CAFS;AAGfqS,eAAO,EAAEV;AAHM,OAAP,CAAL,CAIJ1Q,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA/HL;AAAA;AAAA,WAiII,gCAAuBnL,IAAvB,EAA6B;AACzB,UAAMwN,IAAI,aAAMjC,GAAN,+DAA8DvL,IAA9D,CAAV;AACA,aAAOkL,KAAK,CAACsC,IAAD,EAAO;AACf1B,cAAM,EAAE,KADO;AAEfC,eAAO,EAAEX;AAFM,OAAP,CAAL,CAGJzQ,IAHI,CAGC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAHT,CAAP;AAIH;AAvIL;AAAA;AAAA,WAyII,wBAAe;AACX,UAAMqC,IAAI,aAAMjC,GAAN,mCAAV;AACA,aAAOL,KAAK,CAACsC,IAAD,EAAO;AACf1B,cAAM,EAAE,KADO;AAEfC,eAAO,EAAEX;AAFM,OAAP,CAAL,CAGJzQ,IAHI,CAGC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAHT,CAAP;AAIH;AA/IL;AAAA;AAAA,WAiJI,yBAAgBsC,SAAhB,EAA2B;AACvB,UAAM/T,IAAI,GAAG;AACT+T,iBAAS,EAAEA;AADF,OAAb;AAGA,aAAOvC,KAAK,WAAIK,GAAJ,iDAAqD;AAC7DO,cAAM,EAAE,MADqD;AAE7D5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAehJ,IAAf,CAFuD;AAG7DqS,eAAO,EAAEX;AAHoD,OAArD,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA1JL;;AAAA;AAAA;AA+JA,IAAMtO,cAAc,GAAG,IAAI4O,cAAJ,EAAvB;AAEe5O,6EAAf,E;;;;;;;;;;;;;;;;;;;ICpLM6Q,c;AACJ,4BAAc;AAAA;AAAG;;;;SAEjB,eAAe;AACb,aAAO1T,YAAY,CAACC,OAAb,CAAqB,uBAArB,CAAP;AACD;;;SACD,eAAiB;AACf,aAAOD,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAP;AACD;;;SAED,eAAa;AACX,aAAOD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAP;AACD;;;SAED,eAAa;AACX,aAAOD,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAP;AACD;;;SAED,eAAuB;AACrB,aAAOD,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAP;AACD;;;SAED,eAAsB;AACpB,aAAOD,YAAY,CAACC,OAAb,CAAqB,sBAArB,CAAP;AACD;;;SAED,eAAqB;AACnB,aAAOD,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAP;AACD;;;SAED,eAAe;AACb,aAAOD,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAP;AACD;;;SAED,eAAmB;AACjB,aAAOD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAP;AACD;;;SAED,eAAgB;AACd,aAAOD,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAP;AACD;;;SAED,eAAoB;AAClB,aAAOD,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAP;AACD;;;SAED,eAAmB;AACjB,aAAOD,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAP;AACD;;;SAED,eAAiB;AACf,aAAOD,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAP;AACD;;;SAED,eAAgB;AACd,aAAOD,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAP;AACD;;;SAED,eAAiB;AACf,aAAOD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAP;AACD;;;SAED,eAAe;AACb,aAAOD,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,IAAxC;AACD;;;SAED,eAAuB;AACrB,aAAOD,YAAY,CAACC,OAAb,CAAqB,gBAArB,KAA0C,IAAjD;AACD;;;SAED,eAAc;AACZ,aAAOD,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,GAAxC;AACD;;;SAED,eAAiB;AACf,aAAOD,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,IAAvC;AACD;;;SAED,eAAgB;AACd,aAAOD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAP;AACD;;;SAED,eAAe;AACb,aAAOD,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAP;AACD;;;SAED,eAAqB;AACnB,aAAOD,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAP;AACD;;;SAED,eAAW;AACT,aAAOD,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAP;AACD;;;SAED,eAAa;AACX,aAAOD,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAP;AACD;;;SAGD,aAAkBW,KAAlB,EAAyB;AACvBZ,kBAAY,CAACiB,OAAb,CAAqB,OAArB,EAA8BL,KAA9B;AACD;;;WAED,kBAAS;AACP,UAAI+S,IAAI,GAAG3T,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX;;AACA,UAAI0T,IAAI,IAAI,IAAZ,EAAkB;AACdA,YAAI,GAAG,GAAP;AACH;;AACD3T,kBAAY,CAAC4T,KAAb;AACA5T,kBAAY,CAACiB,OAAb,CAAqB,MAArB,EAA6B0S,IAA7B;AACD;;;;;;AAGH,IAAMhR,cAAc,GAAG,IAAI+Q,cAAJ,EAAvB;AAEe/Q,6EAAf,E;;;;;;;;;;;;ACnHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AAGO,SAASkR,wBAAT,CAAkCnU,IAAlC,EAAwC;AAC3C,MAAIoU,MAAM,GAAG,EAAb;AACA,MAAMC,GAAG,GAAGrU,IAAI,CAACsU,UAAjB;;AAEA,OAAK,IAAIpL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmL,GAApB,EAAyB,EAAEnL,CAA3B,EAA8B;AAC1BkL,UAAM,IAAIG,MAAM,CAACC,YAAP,CAAoBxU,IAAI,CAACkJ,CAAD,CAAxB,CAAV;AACH;;AACD,SAAOrG,MAAM,CAACsF,IAAP,CAAYiM,MAAZ,CAAP;AACH;AAED;AACA;AACA;AACA;;AACO,SAASK,YAAT,CAAsBC,GAAtB,EAA2B;AAC9B,MAAMN,MAAM,GAAGvR,MAAM,CAAC8R,IAAP,CAAYD,GAAZ,CAAf;AACA,MAAML,GAAG,GAAGD,MAAM,CAAC9J,MAAnB;AACA,MAAMsK,KAAK,GAAG,IAAIC,UAAJ,CAAeR,GAAf,CAAd;;AAEA,OAAK,IAAInL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmL,GAApB,EAAyB,EAAEnL,CAA3B,EAA8B;AAC1B0L,SAAK,CAAC1L,CAAD,CAAL,GAAWkL,MAAM,CAACU,UAAP,CAAkB5L,CAAlB,CAAX;AACH;;AACD,SAAO0L,KAAP;AACH;AAEM,SAASG,MAAT,CAAgBC,MAAhB,EAAwB;AAC3B,MAAIf,IAAI,GAAG3T,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX;;AACA,MAAI0T,IAAI,IAAI,IAAZ,EAAkB;AACdA,QAAI,GAAG,GAAP;AACH;;AACD3T,cAAY,CAAC4T,KAAb;AACA5T,cAAY,CAACiB,OAAb,CAAqB,MAArB,EAA6B0S,IAA7B;AACAe,QAAM,CAACC,aAAP,CAAqB,EAArB;AACH;AAED;AACA;AACA;AACA;;AACO,SAASC,wBAAT,CAAkCC,MAAlC,EAA0C;AAC7C,MAAIA,MAAM,CAAC7K,MAAP,IAAiB,EAAjB,IAAuB6K,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiB,CAAjB,MAAwB,MAAnD,EAA2D;AACvD,UAAM,IAAIC,KAAJ,CAAU,aAAV,CAAN;AACH;;AACD,MAAM9G,CAAC,GAAG4G,MAAM,CAACG,OAAP,CAAe,GAAf,IAAsB,CAAhC;;AACA,MAAI/G,CAAC,KAAK,CAAV,EAAa;AACT,UAAM,IAAI8G,KAAJ,CAAU,aAAV,CAAN;AACH;;AACD,MAAM3J,IAAI,GAAGyJ,MAAM,CAACC,MAAP,CAAc7G,CAAd,EAAiB,CAAjB,CAAb;;AACA,MAAI7C,IAAI,KAAK,QAAb,EAAuB;AACnB,UAAM,IAAI2J,KAAJ,CAAU,aAAV,CAAN;AACH;;AACD,MAAME,SAAS,GAAGJ,MAAM,CAACG,OAAP,CAAe,GAAf,IAAsB,CAAxC;;AAEA,MAAIC,SAAS,KAAK,CAAlB,EAAqB;AACjB,UAAM,IAAIF,KAAJ,CAAU,aAAV,CAAN;AACH;;AAED,MAAMG,GAAG,GAAGL,MAAM,CAACC,MAAP,CAAcG,SAAd,EAAyB,CAAzB,CAAZ;;AAEA,MAAIC,GAAG,KAAK,SAAZ,EAAuB;AACnB,UAAM,IAAIH,KAAJ,CAAU,aAAV,CAAN;AACH;;AAED,MAAMI,SAAS,GAAGN,MAAM,CAACC,MAAP,CAAc7G,CAAC,GAAG,CAAlB,EAAqBgH,SAAS,GAAG,CAAZ,GAAgBhH,CAAhB,GAAoB,CAAzC,CAAlB;AAEA,SAAOkH,SAAS,CAAC/G,WAAV,EAAP;AACH;AAED;AACA;AACA;;AACO,SAASgH,SAAT,CAAmBC,OAAnB,EAA4B;AAC/B,MAAMC,UAAU,GAAGjB,IAAI,CAACgB,OAAO,CAACxK,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAD,CAAvB;AACA,MAAM0K,EAAE,GAAG,IAAIC,WAAJ,CAAgBF,UAAU,CAACtL,MAA3B,CAAX;AACA,MAAMyL,EAAE,GAAG,IAAIlB,UAAJ,CAAegB,EAAf,CAAX;;AAEA,OAAK,IAAI3M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0M,UAAU,CAACtL,MAA/B,EAAuCpB,CAAC,EAAxC,EAA4C;AACxC6M,MAAE,CAAC7M,CAAD,CAAF,GAAQ0M,UAAU,CAACd,UAAX,CAAsB5L,CAAtB,CAAR;AACH;;AACD,SAAO,IAAI8M,IAAJ,CAAS,CAACH,EAAD,CAAT,EAAe;AAAEnK,QAAI,EAAE;AAAR,GAAf,CAAP;AACH;AAED;AACA;AACA;;AACO,SAASuK,mBAAT,CAA6BC,KAA7B,EAAoC;AACvC,MAAIA,KAAK,KAAK,uBAAd,EAAuC;AACnC,WAAO,SAAP;AACH,GAFD,MAEO;AACH,WAAO,SAAP;AACH;AACJ;AAED;AACA;AACA;AACA;;AACO,SAASC,YAAT,CAAsBtT,MAAtB,EAA8B;AACjC;AACI,QAAMuT,OAAO,GAAG,SAAhB,CADJ,CAGI;;AACA,QAAMC,IAAI,GAAGC,SAAS,CAACC,UAAvB;AACA,QAAMC,IAAI,GAAGF,SAAS,CAAC5D,SAAvB;AACA,QAAIhO,OAAO,GAAG4R,SAAS,CAACG,OAAxB;AACA,QAAInF,OAAO,GAAG,KAAKoF,UAAU,CAACJ,SAAS,CAACC,UAAX,CAA7B;AACA,QAAII,YAAY,GAAGzE,QAAQ,CAACoE,SAAS,CAACC,UAAX,EAAuB,EAAvB,CAA3B;AACA,QAAIK,UAAJ;AACA,QAAIC,SAAJ;AACA,QAAIC,EAAJ;;AAEA,QAAI,CAACD,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,OAAb,CAAb,KAAuC,CAAC,CAA5C,EAA+C;AAC3C5Q,aAAO,GAAG,OAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;;AACA,UAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,SAAb,CAAb,KAAyC,CAAC,CAA9C,EAAiD;AAC7ChE,eAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH;AACJ;;AACD,QAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,KAAb,CAAb,KAAqC,CAAC,CAA1C,EAA6C;AACzC5Q,aAAO,GAAG,OAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHD,MAGO,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,MAAb,CAAb,KAAsC,CAAC,CAA3C,EAA8C;AACjD5Q,aAAO,GAAG,gBAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHM,MAGA,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,MAAb,CAAb,KAAsC,CAAC,CAA3C,EAA8C;AACjD5Q,aAAO,GAAG,6BAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHM,MAGA,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,QAAb,CAAb,KAAwC,CAAC,CAA7C,EAAgD;AACnD5Q,aAAO,GAAG,QAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHM,MAGA,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,QAAb,CAAb,KAAwC,CAAC,CAA7C,EAAgD;AACnD5Q,aAAO,GAAG,QAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;;AACA,UAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,SAAb,CAAb,KAAyC,CAAC,CAA9C,EAAiD;AAC7ChE,eAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH;AACJ,KANM,MAMA,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,SAAb,CAAb,KAAyC,CAAC,CAA9C,EAAiD;AACpD5Q,aAAO,GAAG,SAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHM,MAGA,IAAIL,IAAI,CAAClB,OAAL,CAAa,UAAb,KAA4B,CAAC,CAAjC,EAAoC;AACvC5Q,aAAO,GAAG,6BAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeP,IAAI,CAAClB,OAAL,CAAa,KAAb,IAAsB,CAArC,CAAV;AACH,KAHM,MAGA,IAAI,CAACsB,UAAU,GAAGJ,IAAI,CAACQ,WAAL,CAAiB,GAAjB,IAAwB,CAAtC,KAA4CH,SAAS,GAAGL,IAAI,CAACQ,WAAL,CAAiB,GAAjB,CAAxD,CAAJ,EAAoF;AACvFtS,aAAO,GAAG8R,IAAI,CAACO,SAAL,CAAeH,UAAf,EAA2BC,SAA3B,CAAV;AACAvF,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;;AACA,UAAInS,OAAO,CAACgK,WAAR,OAA0BhK,OAAO,CAACuS,WAAR,EAA9B,EAAqD;AACjDvS,eAAO,GAAG4R,SAAS,CAACG,OAApB;AACH;AACJ,KAlDL,CAmDI;;;AACA,QAAI,CAACK,EAAE,GAAGxF,OAAO,CAACgE,OAAR,CAAgB,GAAhB,CAAN,KAA+B,CAAC,CAApC,EAAuC;AACnChE,aAAO,GAAGA,OAAO,CAACyF,SAAR,CAAkB,CAAlB,EAAqBD,EAArB,CAAV;AACH;;AACD,QAAI,CAACA,EAAE,GAAGxF,OAAO,CAACgE,OAAR,CAAgB,GAAhB,CAAN,KAA+B,CAAC,CAApC,EAAuC;AACnChE,aAAO,GAAGA,OAAO,CAACyF,SAAR,CAAkB,CAAlB,EAAqBD,EAArB,CAAV;AACH;;AACD,QAAI,CAACA,EAAE,GAAGxF,OAAO,CAACgE,OAAR,CAAgB,GAAhB,CAAN,KAA+B,CAAC,CAApC,EAAuC;AACnChE,aAAO,GAAGA,OAAO,CAACyF,SAAR,CAAkB,CAAlB,EAAqBD,EAArB,CAAV;AACH;;AAEDH,gBAAY,GAAGzE,QAAQ,CAAC,KAAKZ,OAAN,EAAe,EAAf,CAAvB;;AACA,QAAI4F,KAAK,CAACP,YAAD,CAAT,EAAyB;AACrBrF,aAAO,GAAG,KAAKoF,UAAU,CAACJ,SAAS,CAACC,UAAX,CAAzB;AACAI,kBAAY,GAAGzE,QAAQ,CAACoE,SAAS,CAACC,UAAX,EAAuB,EAAvB,CAAvB;AACH,KAlEL,CAoEI;;;AACA,QAAI5R,EAAE,GAAGyR,OAAT;AACA,QAAMe,aAAa,GAAG,CAClB;AAAEvJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KADkB,EAElB;AAAEJ,OAAC,EAAE,aAAL;AAAoBI,OAAC,EAAE;AAAvB,KAFkB,EAGlB;AAAEJ,OAAC,EAAE,WAAL;AAAkBI,OAAC,EAAE;AAArB,KAHkB,EAIlB;AAAEJ,OAAC,EAAE,WAAL;AAAkBI,OAAC,EAAE;AAArB,KAJkB,EAKlB;AAAEJ,OAAC,EAAE,eAAL;AAAsBI,OAAC,EAAE;AAAzB,KALkB,EAMlB;AAAEJ,OAAC,EAAE,qBAAL;AAA4BI,OAAC,EAAE;AAA/B,KANkB,EAOlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KAPkB,EAQlB;AAAEJ,OAAC,EAAE,cAAL;AAAqBI,OAAC,EAAE;AAAxB,KARkB,EASlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KATkB,EAUlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KAVkB,EAWlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KAXkB,EAYlB;AAAEJ,OAAC,EAAE,gBAAL;AAAuBI,OAAC,EAAE;AAA1B,KAZkB,EAalB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KAbkB,EAclB;AAAEJ,OAAC,EAAE,cAAL;AAAqBI,OAAC,EAAE;AAAxB,KAdkB,EAelB;AAAEJ,OAAC,EAAE,SAAL;AAAgBI,OAAC,EAAE;AAAnB,KAfkB,EAgBlB;AAAEJ,OAAC,EAAE,UAAL;AAAiBI,OAAC,EAAE;AAApB,KAhBkB,EAiBlB;AAAEJ,OAAC,EAAE,QAAL;AAAeI,OAAC,EAAE;AAAlB,KAjBkB,EAkBlB;AAAEJ,OAAC,EAAE,WAAL;AAAkBI,OAAC,EAAE;AAArB,KAlBkB,EAmBlB;AAAEJ,OAAC,EAAE,OAAL;AAAcI,OAAC,EAAE;AAAjB,KAnBkB,EAoBlB;AAAEJ,OAAC,EAAE,KAAL;AAAYI,OAAC,EAAE;AAAf,KApBkB,EAqBlB;AAAEJ,OAAC,EAAE,UAAL;AAAiBI,OAAC,EAAE;AAApB,KArBkB,EAsBlB;AAAEJ,OAAC,EAAE,QAAL;AAAeI,OAAC,EAAE;AAAlB,KAtBkB,EAuBlB;AAAEJ,OAAC,EAAE,KAAL;AAAYI,OAAC,EAAE;AAAf,KAvBkB,EAwBlB;AAAEJ,OAAC,EAAE,MAAL;AAAaI,OAAC,EAAE;AAAhB,KAxBkB,EAyBlB;AAAEJ,OAAC,EAAE,MAAL;AAAaI,OAAC,EAAE;AAAhB,KAzBkB,EA0BlB;AAAEJ,OAAC,EAAE,MAAL;AAAaI,OAAC,EAAE;AAAhB,KA1BkB,EA2BlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KA3BkB,CAAtB;;AA6BA,SAAK,IAAItL,EAAT,IAAeyU,aAAf,EAA8B;AAC1B,UAAIC,EAAE,GAAGD,aAAa,CAACzU,EAAD,CAAtB;;AACA,UAAI0U,EAAE,CAACpJ,CAAH,CAAKxD,IAAL,CAAUgM,IAAV,CAAJ,EAAqB;AACjB7R,UAAE,GAAGyS,EAAE,CAACxJ,CAAR;AACA;AACH;AACJ;;AAED,QAAIyJ,SAAS,GAAGjB,OAAhB;;AAEA,QAAI,UAAU5L,IAAV,CAAe7F,EAAf,CAAJ,EAAwB;AACpB0S,eAAS,GAAG,eAAeC,IAAf,CAAoB3S,EAApB,EAAwB,CAAxB,CAAZ;AACAA,QAAE,GAAG,SAAL;AACH;;AAED,YAAQA,EAAR;AACI,WAAK,UAAL;AACI0S,iBAAS,GAAG,yBAAyBC,IAAzB,CAA8Bd,IAA9B,EAAoC,CAApC,CAAZ;AACA;;AAEJ,WAAK,SAAL;AACIa,iBAAS,GAAG,sBAAsBC,IAAtB,CAA2Bd,IAA3B,EAAiC,CAAjC,CAAZ;AACA;;AAEJ,WAAK,KAAL;AACIa,iBAAS,GAAG,yBAAyBC,IAAzB,CAA8BjB,IAA9B,CAAZ;AACAgB,iBAAS,GAAGA,SAAS,CAAC,CAAD,CAAT,GAAe,GAAf,GAAqBA,SAAS,CAAC,CAAD,CAA9B,GAAoC,GAApC,IAA2CA,SAAS,CAAC,CAAD,CAAT,GAAe,CAA1D,CAAZ;AACA;AAZR;AAcH;AAED,SAAOxU,MAAM,CAAC0U,IAAP,GAAc;AACjB7S,WAAO,EAAEA,OADQ;AAEjB8S,kBAAc,EAAElG,OAFC;AAGjBmG,uBAAmB,EAAEd,YAHJ;AAIjBhS,MAAE,EAAEA,EAJa;AAKjB0S,aAAS,EAAEA;AALM,GAArB;AAOH;AAEM,SAASK,YAAT,GAAwB;AAC3B,MAAMC,YAAY,GAAGrB,SAAS,CAACqB,YAA/B;AAEA,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAI,CAACH,YAAD,IAAiB,CAACA,YAAY,CAACI,gBAAnC,EAAqD;AACnDvX,aAAO,CAACC,GAAR,CAAY,gDAAZ;AACAoX,aAAO,CAAC,KAAD,CAAP;AACD;;AAEDF,gBAAY,CAACI,gBAAb,GAAgC9W,IAAhC,CAAqC,UAAC+W,OAAD,EAAa;AAChD,UAAIA,OAAO,CAACC,IAAR,CAAa,UAAAC,MAAM;AAAA,eAAIA,MAAM,CAACC,IAAP,KAAgB,YAApB;AAAA,OAAnB,CAAJ,EAA0D;AACtDN,eAAO,CAAC,IAAD,CAAP;AACH,OAFD,MAEO;AACHA,eAAO,CAAC,KAAD,CAAP;AACH;AACF,KAND,WAMS;AAAA,aAAKC,MAAM,CAAC,KAAD,CAAX;AAAA,KANT;AAOD,GAbM,CAAP;AAcH,C","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/app/app.js\");\n","module.exports = __webpack_public_path__ + \"assets/icon-16.png\";","module.exports = __webpack_public_path__ + \"assets/icon-32.png\";","module.exports = __webpack_public_path__ + \"assets/icon-80_1.png\";","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n * See LICENSE in the project root for license information.\r\n */\r\n\r\nimport gatewayService, { GatewayService } from './services/gateway.service.js';\r\nimport filedataService from './services/filedata.service.js';\r\nimport sessionService from './services/session.service.js';\r\nimport * as attention from './attention.js';\r\nimport * as Utils from './utils.js';\r\n\r\nrequire('./favicon.ico');\r\n\r\n// images references in the manifest\r\nimport \"../../assets/icon-16.png\";\r\nimport \"../../assets/icon-32.png\";\r\nimport \"../../assets/icon-80_1.png\";\r\n\r\n/* global document, Office, Word */\r\n\r\nlet prodEnvironment;\r\nlet haveCamera;\r\nlet userIp;\r\nlet iter = 0;\r\nlet terms = [];\r\nlet customerFirstName;\r\nlet userFromOffice = false;\r\nlet userIsActive = false;\r\nlet isNewUser = false;\r\nlet counter = 0;\r\nlet outsideOffice = false;\r\nconst data = {\r\n  email: \"\",\r\n  password: \"\",\r\n}\r\n\r\nOffice.onReady(info => {\r\n  outsideOffice = (localStorage.getItem('outsideOffice') == 'true');\r\n  //localStorage.setItem('userFromOffice', userFromOffice);\r\n  if(userFromOffice){\r\n    console.log(\"Comienzo\");\r\n  }\r\n  \r\n  console.log(localStorage.getItem('word-document-name1'));\r\n  console.log(localStorage.getItem('word-document1')); \r\n  //console.log(info.document.Name);\r\n  if (info.host === Office.HostType.Word || info.host === Office.HostType.Excel || info.host === Office.HostType.PowerPoint) {\r\n    getEnvironment();\r\n    Utils.detectWebcam().then((value) => {\r\n      haveCamera = value;\r\n    });\r\n    filedataService.getIp().then((respuesta) => {      \r\n      userIp = respuesta.ip;\r\n      console.log('userIp');\r\n      console.log(userIp);\r\n    }).catch(() => {\r\n      userIp = '127.0.0.1';\r\n    }).then(() =>{\r\n      localStorage.setItem('userIp', userIp);\r\n      //Begin Auth\r\n      if(localStorage.getItem('user') !== null && localStorage.getItem('noob') !== '0' && !outsideOffice) {\r\n        data.email = localStorage.getItem('user');\r\n        document.getElementById(\"email\").value = localStorage.getItem('user');\r\n        document.getElementById(\"firstName\").value = localStorage.getItem('firstName');\r\n        document.getElementById(\"lastName\").value = localStorage.getItem('lastName');\r\n        document.getElementById(\"customerMobile\").value = localStorage.getItem('customerMobile');\r\n        document.getElementById(\"header\").style.paddingTop = '10px';\r\n        document.getElementById('welcome-message').innerHTML = 'Verifica tu información:';\r\n        for (let element of document.getElementsByClassName(\"secondScreen\")){\r\n          element.style.display=\"none\";\r\n       }\r\n        moveTitles();\r\n\r\n        onInput();\r\n        submit();\r\n      } \r\n      //End Auth\r\n    });\r\n   \r\n    \r\n    \r\n    document.getElementById(\"sideload-msg\").style.display = \"none\";\r\n    document.getElementById(\"app-body\").style.display = \"flex\";\r\n    document.getElementById(\"email-field\").oninput = onInput;\r\n    document.getElementById(\"password-field\").oninput = onInput;\r\n    document.getElementById(\"login-form\").onsubmit = onSubmit;\r\n   \r\n  }\r\n});\r\n\r\n\r\nfunction onInput(event) {\r\n  if(event !== undefined){\r\n    event.preventDefault();\r\n    const { id, value } = event.target;\r\n    data[id] = value;\r\n  } \r\n  console.log(\"ON INPUT\");\r\n}\r\n\r\nfunction onSubmit(event) {\r\n  if(event !== undefined){\r\n  event.preventDefault();\r\n  }\r\n  document.getElementById(\"load-banner\").style.display =\"block\";\r\n\r\n  if (localStorage.getItem('noob') === '1' && localStorage.getItem('authId') === '0') {\r\n    //Start Create User\r\n    console.log('Inicio Proceso Creacion');\r\n    localStorage.setItem('authId', '1');\r\n    data.email = localStorage.getItem('user');\r\n    validateEmail();\r\n    document.getElementById(\"load-banner\").style.display =\"none\";\r\n    return;\r\n  }\r\n\r\n  const passDOM = document.getElementById('password');\r\n  if(passDOM.value !== \"\"){\r\n    data.password = passDOM.value;\r\n  }\r\n  \r\n  if (data.password === \"\") { \r\n    console.log(\"first val\");\r\n    validateEmail();\r\n    //document.getElementById(\"load-banner\").style.display = \"none\";\r\n    return;\r\n  }\r\n  submit();\r\n  //document.getElementById(\"load-banner\").style.display = \"none\";\r\n}\r\n\r\nfunction getEnvironment() {\r\n  prodEnvironment = window.location.href === 'https://app.mifirma.co/';\r\n}\r\n\r\nfunction submit() {\r\n  counter++;\r\n  console.log(`Attempt # ${counter} to submit...`);\r\n  document.getElementById(\"load-banner\").style.display =\"block\";\r\n\r\n\r\n  \r\n  if (data.password === \"\") { \r\n    validateEmail();\r\n    //document.getElementById(\"load-banner\").style.display = \"none\";\r\n    return;\r\n  }\r\n  if (data.email === \"\" && data.password === \"\") {    \r\n    showInputInvalid();\r\n    return;\r\n  }\r\n\r\n  if(isNewUser) {\r\n    console.log(`autenticating this new user with ${sessionService.authId} and ${data.password}`);\r\n  } else {\r\n    console.log(`no authentication has been done, will be done with ${sessionService.authId}`);\r\n  }\r\n\r\n  gatewayService.validate(sessionService.authId, data.password)\r\n    .then((respuesta) => {\r\n      if (respuesta.data.hit) {\r\n        var providedToken = respuesta.data.nextStep.properties.TOKEN;\r\n        if(typeof providedToken !== 'undefined'){\r\n          localStorage.setItem('token', providedToken);\r\n          window.resizeTo(1200, 650);\r\n          window.location.href = 'documentos.html'\r\n          //window.location.href = 'https://olsrvpruwtce01:6242/dist/documentos.html'\r\n        } else {\r\n          document.getElementById(\"load-banner\").style.display = \"none\";\r\n          new attention.Alert({\r\n            title: 'Error en el Backend',\r\n            content: 'No se ha definido el Token de autorización'\r\n        });\r\n        }\r\n        \r\n        //\r\n        //routerInstance.navigate('/firmador');\r\n      } else {\r\n        clearForm();\r\n        document.getElementById(\"load-banner\").style.display = \"none\";\r\n        document.getElementById(\"password-error\").style.display = \"block\";\r\n        document.getElementById('password').style.borderColor = 'tomato';\r\n        new attention.Alert({\r\n          title: 'Error de autenticación',\r\n          content: 'Contraseña Incorrecta'\r\n      });\r\n        //console.log('Contraseña Incorrecta');\r\n      }\r\n    }).catch((response) => {\r\n      console.log(response);\r\n      if (response.error && response.error.statusCode === 403) {\r\n        document.getElementById(\"password-error\").style.display = \"block\";\r\n        document.getElementById('password-error').style.borderColor = 'tomato';\r\n        document.getElementById('password-error').textContent= 'Superó el máximo de intentos de autenticación, su usuario ha sido bloqueado por medidas de seguridad';\r\n        console.log('Superó el máximo de intentos de autenticación, su usuario ha sido bloqueado por medidas de seguridad');\r\n        //this.router.navigateByUrl('');\r\n      } else {\r\n        //this.router.navigateByUrl('main/errorMifirma', { skipLocationChange: true });\r\n      }\r\n    });\r\n}\r\n\r\nfunction clearForm() {\r\n  data.password = \"\";\r\n}\r\n\r\n/**\r\n* Executes the login process\r\n*/\r\nfunction validateEmail() {\r\n  data.email = document.getElementById(\"email\").value;\r\n  if (data.email === \"\") {\r\n    showInputInvalid();\r\n    return;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 640;\r\n  const isTablet = !isMobile && window.innerWidth <= 800;\r\n  const isDesktop = !isMobile && !isTablet;\r\n\r\n  const windowInfo = Utils.datosMaquina(window);\r\n\r\n  console.log('Validating...');\r\n  if(isNewUser){\r\n    console.log('this is a new user');\r\n  }\r\n  gatewayService.validateUser(\r\n    data.email,\r\n    '',\r\n    userIp,\r\n    windowInfo.browser,\r\n    '',\r\n    windowInfo.os,\r\n    isMobile,\r\n    isTablet,\r\n    isDesktop,\r\n    haveCamera,\r\n    false,\r\n    false\r\n  ).then((respuesta) => {\r\n    if (respuesta.data.userExists) {\r\n      console.log('Logeando user exist...');\r\n      login(respuesta);\r\n    } else {\r\n      //User not found, lets create one\r\n      const required1 = document.createAttribute(\"required\");\r\n      const required2 = document.createAttribute(\"required\");\r\n      const required3 = document.createAttribute(\"required\");\r\n      const required4 = document.createAttribute(\"required\");\r\n      document.getElementById(\"datos\").attributes.setNamedItem(required1);\r\n      document.getElementById(\"terms\").attributes.setNamedItem(required2);\r\n      document.getElementById(\"customerMobile\").attributes.setNamedItem(required3);\r\n      document.getElementById(\"firstName\").attributes.setNamedItem(required4);\r\n      localStorage.setItem('authId', respuesta.data.authId);\r\n      iter++;\r\n      console.log('Creando este nuevo usuario iter:');\r\n      if (localStorage.getItem('userFromOffice') && userFromOffice){\r\n        console.log('El usuario viene de office');\r\n      } else {\r\n        console.log('El usuario NO viene de office');\r\n      }\r\n      console.log(iter);\r\n      //console.log(respuesta);\r\n      for (let element of document.getElementsByClassName(\"thirdScreen\")){\r\n        element.style.display=\"block\";\r\n     }\r\n      var contentFromLS;\r\n      userFromOffice = (localStorage.getItem('userFromOffice') == 'true');\r\n      if (userFromOffice && !outsideOffice){\r\n        contentFromLS = getIdFromOffice();\r\n        console.log('El usuario SI viene de office');\r\n        RefreshLayout(); //To hide password and password confirm\r\n      } else {\r\n        console.log('El usuario NO viene de office');\r\n        localStorage.setItem('user', data.email);\r\n        document.getElementById(\"header\").style.paddingTop = '10px';\r\n        document.getElementById('welcome-message').innerHTML = 'Verifica tu información:';\r\n        const req1 = document.createAttribute(\"required\");\r\n        const req2 = document.createAttribute(\"required\");\r\n        document.getElementById(\"password1\").attributes.setNamedItem(req1);\r\n        document.getElementById(\"password2\").attributes.setNamedItem(req2);\r\n\r\n        //return;\r\n      }\r\n      console.log(`fetched: ${contentFromLS}`);\r\n\r\n      if(iter>1){\r\n        \r\n        console.log(`iteracion: ${iter}`);\r\n        //Verificar contraseña\r\n        var pass1 = document.getElementById('password1');\r\n        var pass2 = document.getElementById('password2');\r\n        var isValid = pass1.classList.contains('valid');\r\n        console.log(`isvalid: ${isValid}`);\r\n        if (!isValid && !userFromOffice){\r\n          document.getElementById('load-banner').style.display = 'none';\r\n          return;\r\n        }\r\n        if(userFromOffice && !isNewUser){\r\n          createNewUser();\r\n        } else if (outsideOffice && !isNewUser){\r\n          createNewUser();\r\n        }\r\n      } \r\n\r\n      if(!userIsActive && iter>1){\r\n        return;\r\n      }\r\n\r\n      //after SUCCESS:\r\n      document.getElementById(\"load-banner\").style.display = \"none\";\r\n      \r\n      document.getElementById(\"user-error\").style.display = \"block\";\r\n      \r\n      //document.getElementById('email').style.borderColor = 'tomato';\r\n\r\n      /*new attention.Alert({\r\n        title: 'Usuario creado!...',\r\n        content: `auth: ${respuesta.data.authId}`\r\n    });   */\r\n      //console.log(\"user does not exist\")\r\n    }\r\n  }).catch((response) => {\r\n    console.log(\"user error\", response);\r\n    if (response.error && response.error.statusCode === 403) {\r\n      new attention.Alert({\r\n        title: 'Error de autenticación',\r\n        content: 'Su usuario ha sido bloqueado por medidas de seguridad, intente más tarde'\r\n    });\r\n      //this.toastr.error('Su usuario ha sido bloqueado por medidas de seguridad, intente más tarde');\r\n    } else {\r\n      //routerInstance.navigate('main/errorMifirma');\r\n    }\r\n  });\r\n}\r\n\r\nfunction RefreshLayout(){\r\n  var pass1 = document.getElementById('pass1'),\r\n    pass2 = document.getElementById('pass2'),\r\n    password1 = document.getElementById('password1'),\r\n    password2 = document.getElementById('password2');\r\n    pass1.style.display = 'none';\r\n    pass2.style.display = 'none';\r\n    document.getElementById(\"email\").disabled = true;\r\n    password1.value = localStorage.getItem('homeAccountIdentifier');\r\n    password2.value = password1.value;\r\n}\r\n\r\nfunction createNewUser(){\r\n  document.getElementById('load-banner').style.display = 'block';\r\n  console.log('pass:');\r\n  console.log(document.getElementById('password1').value);\r\n  document.getElementById(\"load-banner\").style.display = \"block\";\r\n  gatewayService.createCustomer(\r\n    sessionService.firstName, \r\n    sessionService.lastName,  \r\n    document.getElementById('password1').value, \r\n    sessionService.user, \r\n    sessionService.customerMobile, \r\n    sessionService.userIp\r\n    ).then((Respuesta) => {\r\n      if(Respuesta.status === 'Created' && Respuesta.statusCode === 201){\r\n        console.log(Respuesta.message);\r\n        localStorage.setItem('idCustomer', Respuesta.data.idCustomer);\r\n        validateThisUser();\r\n      } else {\r\n        console.log(\"ERROR:\");\r\n        console.log(Respuesta);\r\n        return;\r\n      }\r\n      \r\n  });\r\n//Process\r\n//then\r\n  \r\n}\r\n\r\nfunction validateThisUser() {\r\n  document.getElementById(\"load-banner\").style.display = \"block\";\r\n  gatewayService.validate(\r\n    sessionService.authId,\r\n    \"\"\r\n    ).then((Respuesta) =>{\r\n      \r\n      if (Respuesta.data.hit && Respuesta.data.nextStep.process === 'OTP') {\r\n        askOTPfromUser();\r\n      } else {\r\n        console.log(\"ERROR:\");\r\n        console.log(Respuesta);\r\n        return;\r\n      }\r\n  });\r\n}\r\n\r\nfunction askOTPfromUser(){\r\n  timeDown();\r\n  document.getElementById(\"load-banner\").style.display = \"none\";\r\n  const modal = document.getElementById(\"otp-modal\");\r\n  //modal.style.overflow = \"hidden\";\r\n  document.querySelector(\".MF-inner\").style.overflow = \"hidden\";\r\n  modal.style.display = \"flex\";\r\n  const form = document.getElementById(\"otp-form\");\r\n  const phoneNumber = localStorage.getItem(\"phoneUser\");\r\n  const resendCode = document.getElementById('resend-code');\r\n  resendCode.addEventListener('click', function (){\r\n    document.getElementById('load-banner').style.display = 'block';\r\n    const windowInfo = Utils.datosMaquina(window);\r\n    const isMobile = window.innerWidth <= 640;\r\n    const isTablet = !isMobile && window.innerWidth <= 800;\r\n    const isDesktop = !isMobile && !isTablet;\r\n    gatewayService.validateUser(\r\n      data.email,\r\n      '',\r\n      userIp,\r\n      windowInfo.browser,\r\n      '',\r\n      windowInfo.os,\r\n      isMobile,\r\n      isTablet,\r\n      isDesktop,\r\n      haveCamera,\r\n      false,\r\n      false,\r\n      5,\r\n      sessionService.authId\r\n    ).then((respuesta) => {\r\n      if(respuesta.statusCode == 200){\r\n        timeDown();\r\n        console.log('Resend code successfull');\r\n        document.getElementById('load-banner').style.display = 'none';\r\n      }\r\n    });\r\n    //validateThisUser();\r\n  });\r\n  document.getElementById(\"phoneUs\").innerHTML = phoneNumber;\r\n  \r\n  form.addEventListener(\"submit\", e => {\r\n      e.preventDefault();\r\n      const pin = document.getElementById(\"opt-input\").value; \r\n      document.getElementById(\"load-banner\").style.display = \"block\";\r\n      console.log(`the pin: ${pin}`);\r\n      gatewayService.validate(\r\n        sessionService.authId, \r\n        pin\r\n        ).then((Respuesta) => {\r\n          if (Respuesta.data.hit) {\r\n            console.log('Que falta?');\r\n            console.log(Respuesta);\r\n            gatewayService.acceptTerms(\r\n              sessionService.userIp, \r\n              sessionService.idCustomer\r\n              ).then((Resp) => {\r\n                if (Resp.success){\r\n                  addToMiFirma();\r\n                }\r\n            });            \r\n\r\n          } else { //repeat OTP\r\n            document.getElementById('otp-error').style.display = 'block';\r\n            document.getElementById('otp-error').innerText='Código Incorrecto';\r\n            console.log(Respuesta);\r\n            askOTPfromUser();\r\n          }\r\n      });\r\n  });\r\n\r\n\r\n}\r\n\r\nfunction addToMiFirma(){\r\n  let auth_code;\r\n  gatewayService.addToMiFirma(\r\n    sessionService.firstName + ' ' + sessionService.lastName,\r\n    sessionService.user,\r\n    sessionService.customerMobile\r\n    ).then((Resp) => {\r\n      if(Resp.status_code === 201){\r\n        gatewayService.getValidationParameter(\r\n          sessionService.user\r\n        ).then((Respuesta) => {\r\n          if(Respuesta.statusCode == 200) {\r\n            auth_code = Respuesta.message;\r\n            const activationMessage = sessionService.user + '&&&' + auth_code;\r\n            const activationBase64 = window.btoa(activationMessage);\r\n            gatewayService.activateAccount(\r\n              activationBase64\r\n              ).then((Resp) => {\r\n                if(Resp.statusCode == 200){\r\n                  showSuccess();\r\n                } else {\r\n                  showProcessError();\r\n                }\r\n              });\r\n          } else {\r\n            showProcessError();\r\n          }\r\n        });     \r\n      } else {\r\n        showProcessError();\r\n      }\r\n    });\r\n}\r\n\r\nfunction showSuccess() {\r\n  isNewUser = true;\r\n  document.getElementById(\"load-banner\").style.display = \"none\";\r\n  document.querySelector(\".MF-inner\").style.overflow = \"hidden\";\r\n  const modal = document.getElementById(\"otp-modal\");\r\n  //modal.style.overflow = \"hidden\";\r\n  const modalContent = document.getElementById(\"modal-content\");\r\n  modal.style.display = \"flex\";\r\n  modalContent.innerHTML = `\r\n  <div class=\"success-animation\">\r\n<svg class=\"checkmark\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 52 52\"><circle class=\"checkmark__circle\" cx=\"26\" cy=\"26\" r=\"25\" fill=\"none\" /><path class=\"checkmark__check\" fill=\"none\" d=\"M14.1 27.2l7.1 7.2 16.7-16.8\" /></svg>\r\n</div>\r\n  <h2>Todo salió bien</h2>\r\n  <p>Ya puedes comenzar a usar MiFirma</p>\r\n    <div class=\"MF-center\">\r\n      <button class=\"MF-button3\" id=\"end-process\">Firmar ahora</button>\r\n    </div>\r\n  `;\r\n  document.getElementById('end-process').addEventListener('click', function (){\r\n    \r\n    data.email = sessionService.user;\r\n    if (userFromOffice){\r\n      data.password = sessionService.authority;\r\n    } else {\r\n      data.password = document.getElementById('password1').value;\r\n    }\r\n    console.log(`Iniciando Sesion... con ${data.email} y ${data.password}`); \r\n    validateEmail(); //this should refresh authid\r\n  }); \r\n}\r\n\r\nfunction showProcessError() {\r\n  isNewUser = false;\r\n  document.getElementById(\"load-banner\").style.display = \"none\";\r\n  const modal = document.getElementById(\"otp-modal\");\r\n  const modalContent = document.getElementById(\"modal-content\");\r\n  modal.style.display = \"flex\";\r\n  modalContent.innerHTML = `<h2>Algo salió mal</h2>\r\n  <p>Por favor intente nuevamente mas tarde</p>`;\r\n}\r\n\r\nfunction login(respuesta) {\r\n  localStorage.setItem('personaNombre',\r\n    `${respuesta.data.user.customerFirstName} ${respuesta.data.user.customerLastName}`);\r\n  localStorage.setItem('phoneUser', respuesta.data.user.customerMobile);\r\n  localStorage.setItem('correo', data.email);\r\n  localStorage.setItem('personaId', respuesta.data.user.idCustomer);\r\n  localStorage.setItem('authId', respuesta.data.authId);\r\n\r\n  nextStep(respuesta);\r\n}\r\n\r\nfunction nextStep(respuesta) {\r\n  console.log('Next step:')\r\n  console.log(respuesta.data.nextStep.process);\r\n  switch (respuesta.data.nextStep.process) {\r\n    case 'Registro':\r\n      console.log('Registrando Usuario...');//not active\r\n      break;\r\n    case 'Terminos':\r\n      processTerms(respuesta);\r\n      break;\r\n    case 'Facial':\r\n      routerInstance.navigate(['login/facial']);\r\n      break;\r\n    case 'OTP':\r\n      routerInstance.navigate(['login']);\r\n      break;\r\n    case 'Password':\r\n      const fromOffice = (localStorage.getItem('userFromOffice') == 'true');\r\n      if(fromOffice) {\r\n        var content = getIdFromOffice();\r\n        console.log(content);\r\n        document.getElementById(\"password\").value = sessionService.authority;\r\n        data.password = document.getElementById(\"password\").value;\r\n        console.log('key: ');\r\n        console.log(data.password);\r\n        submit();\r\n      } else if(isNewUser) {\r\n        document.getElementById(\"password\").value = document.getElementById(\"password1\").value;\r\n        data.password = document.getElementById(\"password\").value;\r\n        console.log('key: ');\r\n        console.log(data.password);\r\n        submit();\r\n      }\r\n      else {\r\n        const requiredField = document.createAttribute(\"required\");\r\n        document.getElementById(\"customerName\").innerText = localStorage.getItem('personaNombre');\r\n        document.getElementById(\"password\").attributes.setNamedItem(requiredField);\r\n        document.getElementById(\"submit-btn\").textContent = \"Ingresar\";\r\n        document.getElementById(\"load-banner\").style.display = \"none\";\r\n        for (let element of document.getElementsByClassName(\"firstScreen\")){\r\n          element.style.display=\"none\";\r\n        }\r\n        for (let element of document.getElementsByClassName(\"secondScreen\")){\r\n          element.style.display=\"block\";\r\n        }\r\n      }\r\n    break;\r\n  }\r\n}\r\n\r\nfunction processTerms(respuesta) {\r\n  if (JSON.stringify(respuesta.data.nextStep.properties) == '{}') {\r\n    gatewayService.validate(respuesta.data.authId, '').then((Respuesta) => {\r\n      if (!respuesta.data.user.isActive) {\r\n        //routerInstance.navigate(['registro/activar/cuenta']);\r\n      } else {\r\n        nextStep(Respuesta);\r\n      }\r\n    }).catch((response) => {\r\n      console.log(response)\r\n      if (response.error && response.error.statusCode === 403) {\r\n        console.log('Su usuario ha sido bloqueado por medidas de seguridad, intente más tarde');\r\n      } else {\r\n        // routerInstance.navigate('main/errorMifirma');\r\n      }\r\n    });\r\n  } else {\r\n    console.log(\"Unhandled Terms! \");\r\n    document.getElementById(\"load-banner\").style.display = \"none\";\r\n      new attention.Alert({\r\n        title: 'Terminos y condiciones',\r\n        content: 'Hemos actualizado nuestros términos y condiciones'\r\n    });  \r\n    for (let i in respuesta.data.nextStep.properties) {\r\n      terms.push(+respuesta.data.nextStep.properties[i]);\r\n    }\r\n    console.log(terms);\r\n    // this.fdService.terms(this.terms);\r\n    if (!respuesta.data.user.isActive) {\r\n      localStorage.setItem('noActive', 'false');\r\n    }\r\n    //routerInstance.navigate(['login/terminos']);\r\n  }\r\n}\r\n\r\nfunction showInputInvalid() {\r\n  document.getElementById(\"load-banner\").style.display = \"none\";\r\n  new attention.Alert({\r\n        title: 'Error de autenticación',\r\n        content: 'Correo o contraseña inválidos'\r\n    }); \r\n  //console.log(\"invalid input\")\r\n}\r\n\r\nvar modalTerms = document.getElementById(\"terms-modal\");\r\n\r\n// Get the button that opens the modal\r\nvar btn1 = document.getElementById(\"list-terms\");\r\nvar btn2 = document.getElementById(\"list-data\");\r\n\r\n// Get the <span> element that closes the modal\r\nvar span = document.getElementsByClassName(\"close\")[0];\r\n\r\n// When the user clicks the button, open the modal \r\nbtn2.onclick = function() {\r\n  document.getElementById(\"load-banner\").style.display = \"block\";\r\n  let HTMLContent = \"Empty String 2\";  \r\n  gatewayService.getUserTerms().then((Respuesta) => {\r\n    if(Respuesta.statusCode == 200){\r\n      HTMLContent = Respuesta.data[0].template;\r\n      document.getElementById(\"MF-cont\").innerHTML = HTMLContent.toString();\r\n      //console.log(HTMLContent);\r\n      document.getElementById(\"load-banner\").style.display =\"none\";\r\n    }\r\n  });\r\n  modalTerms.style.display = \"block\";\r\n  //document.getElementById(\"load-banner\").style.display =\"none\";\r\n}\r\n\r\nbtn1.onclick = function() {\r\n  document.getElementById(\"load-banner\").style.display = \"block\";\r\n  let HTMLContent = \"Empty String 1\";\r\n  gatewayService.getUserTerms().then((Respuesta) => {\r\n    if(Respuesta.statusCode == 200){\r\n      HTMLContent = Respuesta.data[1].template;\r\n      document.getElementById(\"MF-cont\").innerHTML = HTMLContent.toString();\r\n      //console.log(HTMLContent);\r\n      document.getElementById(\"load-banner\").style.display =\"none\";\r\n    }\r\n  });\r\n  modalTerms.style.display = \"block\";\r\n  //document.getElementById(\"load-banner\").style.display =\"none\";\r\n}\r\n\r\n// When the user clicks on <span> (x), close the modal\r\nspan.onclick = function() {\r\n  modalTerms.style.display = \"none\";\r\n}\r\n\r\n// When the user clicks anywhere outside of the modal, close it\r\nwindow.onclick = function(event) {\r\n  if (event.target == modalTerms ) {\r\n    modalTerms.style.display = \"none\";\r\n  }\r\n}\r\n\r\n/**Front Password Validation */\r\ndocument.getElementById(\"password1\").addEventListener(\"focus\", validatePassword);\r\ndocument.getElementById(\"password1\").addEventListener(\"focusout\", () =>{\r\n    document.getElementById('float-validation').style.display = 'none';\r\n});\r\n\r\nfunction validatePassword(){\r\n    document.getElementById('float-validation').style.display = 'block';\r\n}\r\n\r\n\r\n(function(){\r\n  var password = document.getElementById('password1');\r\nvar passwordConfirm = document.getElementById('password2');\r\n  \r\n  var helperText = {\r\n      charLength: document.querySelector('.helper-text .length'),\r\n      lowercase: document.querySelector('.helper-text .lowercase'),\r\n      uppercase: document.querySelector('.helper-text .uppercase'),\r\n      special: document.querySelector('.helper-text .special'),\r\n    match: document.querySelector('.helper-text .match')\r\n  };\r\n  \r\n  var pattern = {\r\n      charLength: function() {\r\n          if( password.value.length >= 8 ) {\r\n              return true;\r\n          }\r\n      },\r\n      lowercase: function() {\r\n          var regex = /^(?=.*[a-z]).+$/; // Lowercase character pattern\r\n\r\n          if( regex.test(password.value) ) {\r\n              return true;\r\n          }\r\n      },\r\n      uppercase: function() {\r\n          var regex = /^(?=.*[A-Z]).+$/; // Uppercase character pattern\r\n\r\n          if( regex.test(password.value) ) {\r\n              return true;\r\n          }\r\n      },\r\n      special: function() {\r\n          var regex = /^(?=.*[0-9_\\W]).+$/; // Special character or number pattern\r\n\r\n          if( regex.test(password.value) ) {\r\n              return true;\r\n          }\r\n      }, \r\n    match: function() {\r\n          if( password.value == passwordConfirm.value ) {\r\n              return true;\r\n          }\r\n      }   \r\n  };\r\n  \r\n  // Listen for keyup action on password field\r\npassword.addEventListener('keyup', function (){\r\n      // Check that password is a minimum of 8 characters\r\n      patternTest( pattern.charLength(), helperText.charLength );\r\n      \r\n      // Check that password contains a lowercase letter      \r\n      patternTest( pattern.lowercase(), helperText.lowercase );\r\n      \r\n      // Check that password contains an uppercase letter\r\n      patternTest( pattern.uppercase(), helperText.uppercase );\r\n      \r\n      // Check that password contains a number or special character\r\n      patternTest( pattern.special(), helperText.special );\r\n  // Check that passwords matches\r\n      patternTest( pattern.match(), helperText.match );\r\n  \r\n  // Check that all requirements are fulfilled\r\n  if( hasClass(helperText.charLength, 'valid') &&\r\n            hasClass(helperText.lowercase, 'valid') && \r\n            hasClass(helperText.uppercase, 'valid') && \r\n            hasClass(helperText.special, 'valid') && \r\n            hasClass(helperText.match, 'valid')\r\n      ) {\r\n          addClass(password, 'valid');\r\n          addClass(passwordConfirm, 'valid');\r\n          removeClass(password, 'invalid');\r\n          removeClass(passwordConfirm, 'invalid');\r\n  }\r\n  else {\r\n    removeClass(password, 'valid');\r\n    removeClass(passwordConfirm, 'valid');\r\n    addClass(password, 'invalid');\r\n    addClass(passwordConfirm, 'invalid');\r\n  }\r\n  });\r\n\r\npasswordConfirm.addEventListener('keyup', function (){\r\n      // Check that password is a minimum of 8 characters\r\n      patternTest( pattern.charLength(), helperText.charLength );\r\n      \r\n      // Check that password contains a lowercase letter      \r\n      patternTest( pattern.lowercase(), helperText.lowercase );\r\n      \r\n      // Check that password contains an uppercase letter\r\n      patternTest( pattern.uppercase(), helperText.uppercase );\r\n      \r\n      // Check that password contains a number or special character\r\n      patternTest( pattern.special(), helperText.special );\r\n  // Check that passwords matches\r\n      patternTest( pattern.match(), helperText.match );\r\n  \r\n  // Check that all requirements are fulfilled\r\n  if( hasClass(helperText.charLength, 'valid') &&\r\n            hasClass(helperText.lowercase, 'valid') && \r\n            hasClass(helperText.uppercase, 'valid') && \r\n            hasClass(helperText.special, 'valid') && \r\n            hasClass(helperText.match, 'valid')\r\n      ) {\r\n          addClass(password, 'valid');\r\n          addClass(passwordConfirm, 'valid');\r\n          removeClass(password, 'invalid');\r\n          removeClass(passwordConfirm, 'invalid');\r\n  }\r\n  else {\r\n    removeClass(password, 'valid');\r\n    removeClass(passwordConfirm, 'valid');\r\n    addClass(password, 'invalid');\r\n    addClass(passwordConfirm, 'invalid');\r\n  }\r\n  });\r\n  \r\n  function patternTest(pattern, response) {\r\n      if(pattern) {\r\n    addClass(response, 'valid');\r\n    removeClass(response, 'invalid');\r\n  }\r\n  else {\r\n    removeClass(response, 'valid');\r\n    addClass(response, 'invalid');\r\n  }\r\n  }\r\n  \r\n  function addClass(el, className) {\r\n      if (el.classList) {\r\n          el.classList.add(className);\r\n      }\r\n      else {\r\n          el.className += ' ' + className;\r\n      }\r\n  }\r\n  \r\n  function removeClass(el, className) {\r\n      if (el.classList)\r\n              el.classList.remove(className);\r\n          else\r\n              el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n  }\r\n  \r\n  function hasClass(el, className) {\r\n      if (el.classList) {\r\n          return el.classList.contains(className);    \r\n      }\r\n      else {\r\n          new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className); \r\n      }\r\n  }\r\n  \r\n})();\r\n/**Front Password Validation */\r\n\r\nconst userFirstName = document.querySelector('#firstName');\r\nconst userLastName = document.querySelector('#lastName');\r\nconst customerMobile = document.querySelector('#customerMobile');\r\nconst togglePassword = document.querySelector('#togglePassword');\r\nconst togglePassword1 = document.querySelector('#togglePassword1');\r\nconst togglePassword2 = document.querySelector('#togglePassword2');\r\nconst password = document.querySelector('#password');\r\nconst password1 = document.querySelector('#password1');\r\nconst password2 = document.querySelector('#password2');\r\n\r\nuserFirstName.addEventListener('keyup', function (){\r\n  localStorage.setItem('firstName', userFirstName.value);\r\n});\r\n\r\nuserLastName.addEventListener('keyup', function (){\r\n  localStorage.setItem('lastName', userLastName.value);\r\n});\r\n\r\ncustomerMobile.addEventListener('keyup', function (){\r\n  localStorage.setItem('customerMobile', customerMobile.value);\r\n});\r\n\r\ntogglePassword.addEventListener('click', function (e) {\r\n    // toggle the type attribute\r\n    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';\r\n    password.setAttribute('type', type);\r\n    // toggle the eye slash icon\r\n    this.classList.toggle('fa-eye-slash');\r\n});\r\ntogglePassword1.addEventListener('click', function (e) {\r\n    // toggle the type attribute\r\n    const type = password1.getAttribute('type') === 'password' ? 'text' : 'password';\r\n    password1.setAttribute('type', type);\r\n    // toggle the eye slash icon\r\n    this.classList.toggle('fa-eye-slash');\r\n});\r\ntogglePassword2.addEventListener('click', function (e) {\r\n    // toggle the type attribute\r\n    const type = password2.getAttribute('type') === 'password' ? 'text' : 'password';\r\n    password2.setAttribute('type', type);\r\n    // toggle the eye slash icon\r\n    this.classList.toggle('fa-eye-slash');\r\n});\r\n//new code for adding vanilla store (from main.js)\r\n\r\nfunction getIdFromOffice() {\r\n  var wantedId = 0;\r\n  var keys = Object.keys(localStorage),\r\n      i = keys.length;\r\n  while ( i-- ) {\r\n      var str = keys[i];\r\n      if(str.startsWith(\"{\")){\r\n        var obj = JSON.parse(str);\r\n        //console.log(obj);\r\n        for (var [key, value] of Object.entries(obj)) {\r\n          localStorage.setItem(key, value);\r\n          if(key === 'homeAccountIdentifier'){\r\n            console.log(`found: ${key}: ${value}`);\r\n            wantedId = value;\r\n            userFromOffice = true;\r\n            localStorage.setItem('userFromOffice', userFromOffice);\r\n          }      \r\n        }\r\n      }\r\n      \r\n      }\r\n  return wantedId;\r\n}\r\n\r\n\r\n$( \".MF-input\" ).keyup(function() {\r\n  //console.log($( this ).val());\r\n  if($( this ).val() == \"\"){\r\n  $( this ).siblings(\"label\").switchClass( \"MF-small\", \"MF-big\", 300, \"easeInOutQuad\" );\r\n  } else {\r\n  $( this ).siblings(\"label\").switchClass( \"MF-big\", \"MF-small\", 300, \"easeInOutQuad\" );\r\n  }\r\n    \r\n  });\r\n\r\n\r\n    function moveTitles() {\r\n      $( \".MF-input\" ).each(function() {\r\n        if($( this ).val() == \"\"){\r\n          $( this ).siblings(\"label\").switchClass( \"MF-small\", \"MF-big\", 300, \"easeInOutQuad\" );\r\n          } else {\r\n          $( this ).siblings(\"label\").switchClass( \"MF-big\", \"MF-small\", 300, \"easeInOutQuad\" );\r\n          }\r\n      });\r\n    }\r\n\r\nfunction timeDown(){\r\n  document.getElementById(\"resend-code\").style.display = 'none';\r\n  var seconds = 31;\r\n\r\n  // Update the count down every 1 second\r\n  var x = setInterval(function() {\r\n\r\n  seconds -=1;\r\n\r\n    document.getElementById(\"resend\").innerHTML =\"Reenviar código en \" + seconds + \"s \";\r\n\r\n    // If the count down is over, write some text \r\n    if (seconds < 0) {\r\n      clearInterval(x);\r\n      document.getElementById(\"resend-code\").style.display = 'block';\r\n      document.getElementById(\"resend\").innerHTML = \"\";\r\n    }\r\n  }, 1000);\r\n}","!(function(t, n) {\r\n  \"object\" == typeof exports && \"undefined\" != typeof module\r\n    ? n(exports)\r\n    : \"function\" == typeof define && define.amd\r\n    ? define([\"exports\"], n)\r\n    : n(((t = t || self).Attention = {}));\r\n})(this, function(t) {\r\n  \"use strict\";\r\n  function i(t, n) {\r\n    if (!(t instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\r\n  }\r\n  function o(t, n) {\r\n    for (var e = 0; e < n.length; e++) {\r\n      var i = n[e];\r\n      (i.enumerable = i.enumerable || !1),\r\n        (i.configurable = !0),\r\n        \"value\" in i && (i.writable = !0),\r\n        Object.defineProperty(t, i.key, i);\r\n    }\r\n  }\r\n  function s(t, n, e) {\r\n    return n && o(t.prototype, n), e && o(t, e), t;\r\n  }\r\n  function n(t, n) {\r\n    if (\"function\" != typeof n && null !== n) throw new TypeError(\"Super expression must either be null or a function\");\r\n    (t.prototype = Object.create(n && n.prototype, { constructor: { value: t, writable: !0, configurable: !0 } })),\r\n      n && e(t, n);\r\n  }\r\n  function r(t) {\r\n    return (r = Object.setPrototypeOf\r\n      ? Object.getPrototypeOf\r\n      : function(t) {\r\n          return t.__proto__ || Object.getPrototypeOf(t);\r\n        })(t);\r\n  }\r\n  function e(t, n) {\r\n    return (e =\r\n      Object.setPrototypeOf ||\r\n      function(t, n) {\r\n        return (t.__proto__ = n), t;\r\n      })(t, n);\r\n  }\r\n  function a(t, n) {\r\n    return !n || (\"object\" != typeof n && \"function\" != typeof n)\r\n      ? (function(t) {\r\n          if (void 0 === t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n          return t;\r\n        })(t)\r\n      : n;\r\n  }\r\n  function c(t) {\r\n    return \"string\" == typeof t;\r\n  }\r\n  function l(t, n, e) {\r\n    var i = 0 < arguments.length && void 0 !== t ? t : \"div\",\r\n      o = 1 < arguments.length && void 0 !== n ? n : null,\r\n      s = 2 < arguments.length && void 0 !== e ? e : [],\r\n      r = document.createElement(i);\r\n    if (null !== o) {\r\n      var a = function(n) {\r\n        var t;\r\n        ((t = n).startsWith(\"on\") ? t.toLowerCase() : \"on\".concat(t)) in window\r\n          ? r.addEventListener(n, function(t) {\r\n              o[n](t, r);\r\n            })\r\n          : r.setAttribute(n, o[n]);\r\n      };\r\n      for (var c in o) a(c);\r\n    }\r\n    return (\r\n      0 < s.length &&\r\n        s.forEach(function(t) {\r\n          \"string\" == typeof t ? r.appendChild(document.createTextNode(t)) : r.appendChild(t);\r\n        }),\r\n      r\r\n    );\r\n  }\r\n  var u = (function() {\r\n      function n(t) {\r\n        i(this, n),\r\n          (this.options = t),\r\n          c(t.title) && (this.title = t.title),\r\n          (this.useInnerHTML = !0 === t.useInnerHTML),\r\n          c(t.content) && (this.content = t.content),\r\n          t.animation && (\"boolean\" == typeof t.animation || c(t.animation))\r\n            ? (this.animation = t.animation)\r\n            : (this.animation = \"fade\"),\r\n          (this.port = null),\r\n          (this.template = this.createBase());\r\n      }\r\n      return (\r\n        s(n, [\r\n          {\r\n            key: \"createBase\",\r\n            value: function() {\r\n              var t,\r\n                n = this,\r\n                e = l(\"div\", {\r\n                  class: \"close\",\r\n                  click: function() {\r\n                    n.close();\r\n                  }\r\n                });\r\n              return (\r\n                (e.innerHTML =\r\n                  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>'),\r\n                (this.port = l(\"div\", { class: \"port\" })),\r\n                (t = \"fade\" === this.animation ? \"opacity:0;\" : \"\"),\r\n                (this.container = l(\"div\", { class: \"attention-component\", style: t }, [\r\n                  l(\"div\", { class: \"inner\" }, [l(\"div\", { class: \"content\" }, [e, this.port])])\r\n                ])),\r\n                this.container\r\n              );\r\n            }\r\n          },\r\n          {\r\n            key: \"render\",\r\n            value: function(t) {\r\n              var n,\r\n                e,\r\n                i,\r\n                o = 0 < arguments.length && void 0 !== t ? t : document.body;\r\n              this.options.beforeRender && this.options.beforeRender(this),\r\n                o.appendChild(this.template),\r\n                this.options.afterRender && this.options.afterRender(this),\r\n                \"fade\" === this.animation &&\r\n                  ((n = this.template),\r\n                  (i = 0),\r\n                  window.requestAnimationFrame(function t() {\r\n                    100 <= i\r\n                      ? (window.cancelAnimationFrame(t), e && e(n))\r\n                      : ((i += 10), (n.style.opacity = (i / 100).toString()), window.requestAnimationFrame(t));\r\n                  }));\r\n            }\r\n          },\r\n          {\r\n            key: \"destroy\",\r\n            value: function() {\r\n              this.container.parentElement.removeChild(this.container),\r\n                this.options.afterClose && this.options.afterClose(this);\r\n            }\r\n          },\r\n          {\r\n            key: \"close\",\r\n            value: function() {\r\n              var n,\r\n                e,\r\n                i,\r\n                t = this;\r\n              this.options.beforeClose && this.options.beforeClose(this),\r\n                this.animation\r\n                  ? \"fade\" === this.animation &&\r\n                    ((n = this.container),\r\n                    (e = function() {\r\n                      t.destroy();\r\n                    }),\r\n                    (i = 100),\r\n                    window.requestAnimationFrame(function t() {\r\n                      i <= 0\r\n                        ? (window.cancelAnimationFrame(t), e && e(n))\r\n                        : ((i -= 10), (n.style.opacity = (i / 100).toString()), window.requestAnimationFrame(t));\r\n                    }))\r\n                  : this.destroy();\r\n            }\r\n          }\r\n        ]),\r\n        n\r\n      );\r\n    })(),\r\n    h = (function() {\r\n      function e(t) {\r\n        var n;\r\n        return i(this, e), (n = a(this, r(e).call(this, t))).injectTemplate(), n.render(), n;\r\n      }\r\n      return (\r\n        n(e, u),\r\n        s(e, [\r\n          {\r\n            key: \"injectTemplate\",\r\n            value: function() {\r\n              var t,\r\n                n = l(\"div\", { class: \"head\" }, [l(\"p\", { class: \"title\" }, [this.title])]);\r\n              if ((this.port.appendChild(n), this.useInnerHTML)) {\r\n                var e = l(\"div\", { class: \"content\" });\r\n                (e.innerHTML = this.content), (t = l(\"div\", { class: \"inner-container\" }, [e]));\r\n              } else t = l(\"div\", { class: \"inner-container\" }, [l(\"p\", { class: \"content\" }, [this.content])]);\r\n              this.port.appendChild(n), this.port.appendChild(t);\r\n            }\r\n          }\r\n        ]),\r\n        e\r\n      );\r\n    })(),\r\n    p = (function() {\r\n      function e(t) {\r\n        var n;\r\n        return (\r\n          i(this, e),\r\n          ((n = a(this, r(e).call(this, t))).submitText = c(t.submitText) ? t.submitText : \"Send\"),\r\n          (n.placeholderText = c(t.placeholderText) ? t.placeholderText : \"Type\"),\r\n          n.injectTemplate(),\r\n          n.render(),\r\n          n\r\n        );\r\n      }\r\n      return (\r\n        n(e, u),\r\n        s(e, [\r\n          {\r\n            key: \"handleInput\",\r\n            value: function(t) {\r\n              (\"Enter\" !== t.key && 13 !== t.keyCode) || this.submit();\r\n            }\r\n          },\r\n          {\r\n            key: \"submit\",\r\n            value: function() {\r\n              var t = this.input.value;\r\n              \"\" !== t && (this.close(), this.options.onSubmit && this.options.onSubmit(this, t));\r\n            }\r\n          },\r\n          {\r\n            key: \"injectTemplate\",\r\n            value: function() {\r\n              var e = this,\r\n                t = l(\"div\", { class: \"head\" }, [l(\"p\", { class: \"title\" }, [this.title])]);\r\n              this.port.appendChild(t),\r\n                (this.input = l(\"input\", {\r\n                  type: \"text\",\r\n                  class: \"input\",\r\n                  placeholder: this.placeholderText,\r\n                  keyup: function(t, n) {\r\n                    e.handleInput(t, n);\r\n                  }\r\n                }));\r\n              var n,\r\n                i = l(\"div\", { class: \"prompt-elements\" }, [\r\n                  this.input,\r\n                  l(\r\n                    \"button\",\r\n                    {\r\n                      class: \"button\",\r\n                      click: function() {\r\n                        e.submit();\r\n                      }\r\n                    },\r\n                    [this.submitText]\r\n                  )\r\n                ]);\r\n              if (this.useInnerHTML) {\r\n                var o = l(\"div\", { class: \"content\" });\r\n                (o.innerHTML = this.content), (n = l(\"div\", { class: \"inner-container\" }, [o, i]));\r\n              } else n = l(\"div\", { class: \"inner-container\" }, [l(\"p\", { class: \"content\" }, [this.content]), i]);\r\n              this.port.appendChild(t), this.port.appendChild(n);\r\n            }\r\n          }\r\n        ]),\r\n        e\r\n      );\r\n    })(),\r\n    d = (function() {\r\n      function e(t) {\r\n        var n;\r\n        return (\r\n          i(this, e),\r\n          ((n = a(this, r(e).call(this, t))).buttonCancel = c(t.buttonCancel) ? t.buttonCancel : \"No\"),\r\n          (n.buttonConfirm = c(t.buttonConfirm) ? t.buttonConfirm : \"Agree\"),\r\n          n.injectTemplate(),\r\n          n.render(),\r\n          n\r\n        );\r\n      }\r\n      return (\r\n        n(e, u),\r\n        s(e, [\r\n          {\r\n            key: \"injectTemplate\",\r\n            value: function() {\r\n              var t,\r\n                n = this,\r\n                e = l(\"div\", { class: \"head\" }, [l(\"p\", { class: \"title\" }, [this.title])]);\r\n              if ((this.port.appendChild(e), this.useInnerHTML)) {\r\n                var i = l(\"div\", { class: \"content\" });\r\n                (i.innerHTML = this.content), (t = l(\"div\", { class: \"inner-container\" }, [i]));\r\n              } else t = l(\"div\", { class: \"inner-container\" }, [l(\"p\", { class: \"content\" }, [this.content])]);\r\n              t.appendChild(\r\n                l(\"div\", { class: \"buttons\" }, [\r\n                  l(\r\n                    \"button\",\r\n                    {\r\n                      class: \"cancel\",\r\n                      click: function() {\r\n                        n.close(), n.options.onCancel && n.options.onCancel(n);\r\n                      }\r\n                    },\r\n                    [this.buttonCancel]\r\n                  ),\r\n                  l(\r\n                    \"button\",\r\n                    {\r\n                      class: \"confirm\",\r\n                      click: function() {\r\n                        n.close(), n.options.onConfirm && n.options.onConfirm(n);\r\n                      }\r\n                    },\r\n                    [this.buttonConfirm]\r\n                  )\r\n                ])\r\n              ),\r\n                this.port.appendChild(e),\r\n                this.port.appendChild(t);\r\n            }\r\n          }\r\n        ]),\r\n        e\r\n      );\r\n    })();\r\n  (t.Alert = h),\r\n    (t.Confirm = d),\r\n    (t.Prompt = p),\r\n    (t.version = \"0.1.0\"),\r\n    Object.defineProperty(t, \"__esModule\", { value: !0 });\r\n});\r\n","module.exports = __webpack_public_path__ + \"src/app/favicon.ico\";","class FiledataService {\r\n\r\n    getIp() {\r\n        return fetch('https://jsonip.com').then(response => response.json());\r\n    }\r\n\r\n}\r\n\r\nconst filedataService = new FiledataService();\r\n\r\nexport default filedataService;","const httpOptions = {\r\n    'Content-Type': 'application/json',\r\n    'ChannelAuthorization': 'Basic MDJDQ0VFQkEtMTE1Mi00MkY3LThEMUEtREYxREJDRjRBRjA2OjAyMzEyRkU3LTQ5MDUtNEQ1Qy1BQ0I1LTUyQTQ2QzYxMzE5NQ=='\r\n};\r\n\r\nconst httpOptions3 = {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\r\n};\r\n\r\nconst httpOptions2 = () => ({\r\n    'Content-Type': 'application/json',\r\n    'ChannelAuthorization': 'Basic MDJDQ0VFQkEtMTE1Mi00MkY3LThEMUEtREYxREJDRjRBRjA2OjAyMzEyRkU3LTQ5MDUtNEQ1Qy1BQ0I1LTUyQTQ2QzYxMzE5NQ==',\r\n    'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\r\n});\r\n\r\nconst url = \"https://olsrvpruwbce01:6595/\";\r\nconst GatewayMiFirma = \"https://olsrvpruwbce01:6741/\";\r\n\r\nexport class GatewayService {\r\n\r\n    acceptTerms(userIp, idCustomer) {\r\n        const data = {\r\n            publicIP: userIp,\r\n            customerId: parseInt(idCustomer),\r\n            termsId: [7,8],\r\n        }\r\n        console.log('DATA ACC:');\r\n        console.log(data);\r\n        return fetch(`${url}Gateway/api/v2_0/terms/acceptance`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    createCustomer(name, lastname, password, user, mobile, ip) {\r\n        const data = {\r\n            firstName: name,\r\n            lastName: lastname,\r\n            password: password,\r\n            user: user,\r\n            customerMobile: mobile,\r\n            publicIP: ip,\r\n        }\r\n        return fetch(`${url}Gateway/api/v2_0/createCustomer`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n    validateUser(user, phonenumber, ip, browser, userAgent, os, mobile, tablet,\r\n        desktop, camera, secondcamera, fingerprint, processCode, authId) {\r\n        const data = {\r\n            user: user,\r\n            phoneNumber: phonenumber,\r\n            deviceInfo: {\r\n                publicIp: ip,\r\n                browser: browser,\r\n                os: os,\r\n                isMobile: mobile,\r\n                isTablet: tablet,\r\n                isDesktop: desktop,\r\n                hasCamera: camera,\r\n                hasSecondaryCamera: secondcamera,\r\n                hasFingerprintReader: fingerprint\r\n            }\r\n        }\r\n        if (processCode !== \"\" || processCode !== undefined) data.processCode = processCode;\r\n        if (authId !== \"\" || authId !== undefined) data.authId = authId;\r\n        console.log(`processCode: ${processCode}`);\r\n        console.log(`authId: ${processCode}`);\r\n        console.log(data);\r\n        return fetch(`${url}Gateway/api/v2_0/validate/user`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n    validate(guid, data) {\r\n        const val = {\r\n            guid: guid,\r\n            data: data\r\n        }\r\n        console.log(val);\r\n        return fetch(`${url}Gateway/api/v2_0/validate`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(val),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    getTerms() {\r\n        return fetch(`${url}Gateway/Terms`).then(response => response.json());\r\n    }\r\n\r\n    getEspecificTerms(ids) {\r\n        let id = \"\";\r\n        for (let i = 0; i < ids.length; i++) {\r\n            id += \"ids=\" + ids[i] + \"&\"\r\n        }\r\n\r\n        id = id.slice(0, -1)\r\n\r\n        return fetch(`${url}Gateway/EspecificTerms/${id}`).then(response => response.json());\r\n    }\r\n\r\n    resetPassword(pass) {\r\n        const data = {\r\n            newPassword: pass,\r\n        }\r\n        return fetch(`${url}Gateway/ResetPassword`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions2(),\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    addToMiFirma(name, email, phoneNumber) {\r\n        const data = {\r\n            name: name,\r\n            email: email,\r\n            phoneNumber: parseInt(phoneNumber)\r\n        }\r\n        return fetch(`${GatewayMiFirma}Gateway/api/v1_0/user/create`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    uploadSignature(file, fileName, fileExtension) {\r\n        console.log(httpOptions3);\r\n        const data = {\r\n            file: file,\r\n            fileName: fileName,\r\n            fileExtension: fileExtension\r\n        }\r\n        const path = `${GatewayMiFirma}Gateway/api/v1_0/graph/save`;\r\n        //console.log(path);\r\n        //console.log(data);\r\n        return fetch(path, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions3\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    getValidationParameter(user) {\r\n        const path = `${url}Gateway/api/v2_0/customers/getValidationParameter/${user}`;\r\n        return fetch(path, {\r\n            method: \"GET\",\r\n            headers: httpOptions\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    getUserTerms() {\r\n        const path = `${url}Gateway/api/v3_0/terms/enabled`;\r\n        return fetch(path, {\r\n            method: \"GET\",\r\n            headers: httpOptions\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    activateAccount(activator) {\r\n        const data = {\r\n            activator: activator,\r\n        }\r\n        return fetch(`${url}Gateway/api/v2_0/customers/activateAccount`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n\r\n\r\n}\r\n\r\nconst gatewayService = new GatewayService();\r\n\r\nexport default gatewayService;","class SessionService {\r\n  constructor() { }\r\n\r\n  get authority(){\r\n    return localStorage.getItem('homeAccountIdentifier');\r\n  }\r\n  get idCustomer() {\r\n    return localStorage.getItem('idCustomer');\r\n  }\r\n\r\n  get userId() {\r\n    return localStorage.getItem('personaId');\r\n  }\r\n\r\n  get authId() {\r\n    return localStorage.getItem('authId');\r\n  }\r\n\r\n  get identificadorOtp() {\r\n    return localStorage.getItem('identificadorOTP');\r\n  }\r\n\r\n  get recoRestrictive() {\r\n    return localStorage.getItem('reconoserRestrictive');\r\n  }\r\n\r\n  get otpRestrictive() {\r\n    return localStorage.getItem('otpRestrictive');\r\n  }\r\n\r\n  get username() {\r\n    return localStorage.getItem('personaNombre');\r\n  }\r\n\r\n  get documentUser() {\r\n    return localStorage.getItem('documento');\r\n  }\r\n\r\n  get emailUser() {\r\n    return localStorage.getItem('correo');\r\n  }\r\n\r\n  get reconoserGuid() {\r\n    return localStorage.getItem('reconoserGuid');\r\n  }\r\n\r\n  get reconoserUrl() {\r\n    return localStorage.getItem('reconoserUrl');\r\n  }\r\n\r\n  get validarOtp() {\r\n    return localStorage.getItem('validarOtp');\r\n  }\r\n\r\n  get phoneUser() {\r\n    return localStorage.getItem('celular');\r\n  }\r\n\r\n  get phoneUser2() {\r\n    return localStorage.getItem('phoneUser');\r\n  }\r\n\r\n  get isLogged() {\r\n    return localStorage.getItem('token') != null;\r\n  }\r\n\r\n  get isRequestPending() {\r\n    return localStorage.getItem('pendingRequest') != null;\r\n  }\r\n\r\n  get isANoob() {\r\n    return localStorage.getItem('noob') === '1';\r\n  }\r\n\r\n  get isNoobNull() {\r\n    return localStorage.getItem('noob') == null;\r\n  }\r\n\r\n  get firstName() {\r\n    return localStorage.getItem('firstName');\r\n  }\r\n\r\n  get lastName() {\r\n    return localStorage.getItem('lastName');\r\n  }\r\n\r\n  get customerMobile() {\r\n    return localStorage.getItem('customerMobile');\r\n  }\r\n\r\n  get user() {\r\n    return localStorage.getItem('user');\r\n  }\r\n\r\n  get userIp() {\r\n    return localStorage.getItem('userIp');\r\n  }\r\n\r\n\r\n  set signatureGuid(value) {\r\n    localStorage.setItem('firma', value);\r\n  }\r\n\r\n  logout() {\r\n    let noob = localStorage.getItem('noob');\r\n    if (noob == null) {\r\n        noob = '1';\r\n    }\r\n    localStorage.clear();\r\n    localStorage.setItem('noob', noob);\r\n  }\r\n}\r\n\r\nconst sessionService = new SessionService();\r\n\r\nexport default sessionService;","// This file contains utility functions used across the application\r\n\r\n/**\r\n * Converts an unsigned array to a uri base64 string\r\n * @param data Array of unsigned integers data\r\n */\r\n\r\n\r\nexport function Uint8ArrayToStringBase64(data) {\r\n    let binary = '';\r\n    const len = data.byteLength;\r\n\r\n    for (let i = 0; i < len; ++i) {\r\n        binary += String.fromCharCode(data[i]);\r\n    }\r\n    return window.btoa(binary);\r\n}\r\n\r\n/**\r\n * Converts a uri base64 string to an unsigned array\r\n * @param src Uri base64 data\r\n */\r\nexport function stringToUint(src) {\r\n    const binary = window.atob(src);\r\n    const len = binary.length;\r\n    const bytes = new Uint8Array(len);\r\n\r\n    for (let i = 0; i < len; ++i) {\r\n        bytes[i] = binary.charCodeAt(i);\r\n    }\r\n    return bytes;\r\n}\r\n\r\nexport function logout(router) {\r\n    let noob = localStorage.getItem('noob');\r\n    if (noob == null) {\r\n        noob = '1';\r\n    }\r\n    localStorage.clear();\r\n    localStorage.setItem('noob', noob);\r\n    router.navigateByUrl('');\r\n}\r\n\r\n/**\r\n * Given a uri representation of an image of the form data:image/extension;base64, data, it returns the extesion of the image\r\n * @param base64 uri base64 data\r\n */\r\nexport function getExtensionImageFromURI(base64) {\r\n    if (base64.length <= 22 || base64.substr(0, 4) !== 'data') {\r\n        throw new Error('Invalid URI');\r\n    }\r\n    const l = base64.indexOf(':') + 1;\r\n    if (l !== 5) {\r\n        throw new Error('Invalid URI');\r\n    }\r\n    const type = base64.substr(l, 6);\r\n    if (type !== 'image/') {\r\n        throw new Error('Invalid URI');\r\n    }\r\n    const semicolon = base64.indexOf(';') + 1;\r\n\r\n    if (semicolon === 0) {\r\n        throw new Error('Invalid URI');\r\n    }\r\n\r\n    const uri = base64.substr(semicolon, 7);\r\n\r\n    if (uri !== 'base64,') {\r\n        throw new Error('Invalid URI');\r\n    }\r\n\r\n    const extension = base64.substr(l + 6, semicolon - 1 - l - 6);\r\n\r\n    return extension.toLowerCase();\r\n}\r\n\r\n/**\r\n * Transforms a URI - base64 to a blob\r\n */\r\nexport function b64toBlob(dataURI) {\r\n    const byteString = atob(dataURI.split(',')[1]);\r\n    const ab = new ArrayBuffer(byteString.length);\r\n    const ia = new Uint8Array(ab);\r\n\r\n    for (let i = 0; i < byteString.length; i++) {\r\n        ia[i] = byteString.charCodeAt(i);\r\n    }\r\n    return new Blob([ab], { type: 'application/pdf' });\r\n}\r\n\r\n/**\r\n * Gets the hexadecimal representation of a rgba color\r\n */\r\nexport function getHexColorFromRgba(color) {\r\n    if (color === 'rgba(158,234,170,0.5)') {\r\n        return '#9eeaaa';\r\n    } else {\r\n        return '#a0daff';\r\n    }\r\n}\r\n\r\n/**\r\n * Returns an object with details about the client machine\r\n * @param window window object\r\n */\r\nexport function datosMaquina(window) {\r\n    {\r\n        const unknown = 'unknown';\r\n\r\n        // browser\r\n        const nVer = navigator.appVersion;\r\n        const nAgt = navigator.userAgent;\r\n        var browser = navigator.appName;\r\n        var version = '' + parseFloat(navigator.appVersion);\r\n        var majorVersion = parseInt(navigator.appVersion, 10);\r\n        let nameOffset;\r\n        let verOffset;\r\n        let ix;\r\n\r\n        if ((verOffset = nAgt.indexOf('Opera')) != -1) {\r\n            browser = 'Opera';\r\n            version = nAgt.substring(verOffset + 6);\r\n            if ((verOffset = nAgt.indexOf('Version')) != -1) {\r\n                version = nAgt.substring(verOffset + 8);\r\n            }\r\n        }\r\n        if ((verOffset = nAgt.indexOf('OPR')) != -1) {\r\n            browser = 'Opera';\r\n            version = nAgt.substring(verOffset + 4);\r\n        } else if ((verOffset = nAgt.indexOf('Edge')) != -1) {\r\n            browser = 'Microsoft Edge';\r\n            version = nAgt.substring(verOffset + 5);\r\n        } else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {\r\n            browser = 'Microsoft Internet Explorer';\r\n            version = nAgt.substring(verOffset + 5);\r\n        } else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {\r\n            browser = 'Chrome';\r\n            version = nAgt.substring(verOffset + 7);\r\n        } else if ((verOffset = nAgt.indexOf('Safari')) != -1) {\r\n            browser = 'Safari';\r\n            version = nAgt.substring(verOffset + 7);\r\n            if ((verOffset = nAgt.indexOf('Version')) != -1) {\r\n                version = nAgt.substring(verOffset + 8);\r\n            }\r\n        } else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {\r\n            browser = 'Firefox';\r\n            version = nAgt.substring(verOffset + 8);\r\n        } else if (nAgt.indexOf('Trident/') != -1) {\r\n            browser = 'Microsoft Internet Explorer';\r\n            version = nAgt.substring(nAgt.indexOf('rv:') + 3);\r\n        } else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {\r\n            browser = nAgt.substring(nameOffset, verOffset);\r\n            version = nAgt.substring(verOffset + 1);\r\n            if (browser.toLowerCase() === browser.toUpperCase()) {\r\n                browser = navigator.appName;\r\n            }\r\n        }\r\n        // trim the version string\r\n        if ((ix = version.indexOf(';')) != -1) {\r\n            version = version.substring(0, ix);\r\n        }\r\n        if ((ix = version.indexOf(' ')) != -1) {\r\n            version = version.substring(0, ix);\r\n        }\r\n        if ((ix = version.indexOf(')')) != -1) {\r\n            version = version.substring(0, ix);\r\n        }\r\n\r\n        majorVersion = parseInt('' + version, 10);\r\n        if (isNaN(majorVersion)) {\r\n            version = '' + parseFloat(navigator.appVersion);\r\n            majorVersion = parseInt(navigator.appVersion, 10);\r\n        }\r\n\r\n        // system\r\n        var os = unknown;\r\n        const clientStrings = [\r\n            { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },\r\n            { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },\r\n            { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },\r\n            { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },\r\n            { s: 'Windows Vista', r: /Windows NT 6.0/ },\r\n            { s: 'Windows Server 2003', r: /Windows NT 5.2/ },\r\n            { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },\r\n            { s: 'Windows 2000', r: /(Windows NT 5.0|Windows 2000)/ },\r\n            { s: 'Windows ME', r: /(Win 9x 4.90|Windows ME)/ },\r\n            { s: 'Windows 98', r: /(Windows 98|Win98)/ },\r\n            { s: 'Windows 95', r: /(Windows 95|Win95|Windows_95)/ },\r\n            { s: 'Windows NT 4.0', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },\r\n            { s: 'Windows CE', r: /Windows CE/ },\r\n            { s: 'Windows 3.11', r: /Win16/ },\r\n            { s: 'Android', r: /Android/ },\r\n            { s: 'Open BSD', r: /OpenBSD/ },\r\n            { s: 'Sun OS', r: /SunOS/ },\r\n            { s: 'Chrome OS', r: /CrOS/ },\r\n            { s: 'Linux', r: /(Linux|X11(?!.*CrOS))/ },\r\n            { s: 'iOS', r: /(iPhone|iPad|iPod)/ },\r\n            { s: 'Mac OS X', r: /Mac OS X/ },\r\n            { s: 'Mac OS', r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\r\n            { s: 'QNX', r: /QNX/ },\r\n            { s: 'UNIX', r: /UNIX/ },\r\n            { s: 'BeOS', r: /BeOS/ },\r\n            { s: 'OS/2', r: /OS\\/2/ },\r\n            { s: 'Search Bot', r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/ }\r\n        ];\r\n        for (var id in clientStrings) {\r\n            var cs = clientStrings[id];\r\n            if (cs.r.test(nAgt)) {\r\n                os = cs.s;\r\n                break;\r\n            }\r\n        }\r\n\r\n        var osVersion = unknown;\r\n\r\n        if (/Windows/.test(os)) {\r\n            osVersion = /Windows (.*)/.exec(os)[1];\r\n            os = 'Windows';\r\n        }\r\n\r\n        switch (os) {\r\n            case 'Mac OS X':\r\n                osVersion = /Mac OS X (10[\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                break;\r\n\r\n            case 'Android':\r\n                osVersion = /Android ([\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                break;\r\n\r\n            case 'iOS':\r\n                osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(nVer);\r\n                osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\r\n                break;\r\n        }\r\n    }\r\n\r\n    return window.jscd = {\r\n        browser: browser,\r\n        browserVersion: version,\r\n        browserMajorVersion: majorVersion,\r\n        os: os,\r\n        osVersion: osVersion\r\n    };\r\n}\r\n\r\nexport function detectWebcam() {\r\n    const mediaDevices = navigator.mediaDevices;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      if (!mediaDevices || !mediaDevices.enumerateDevices) {\r\n        console.log('No hay media devices, saltar al próximo paso !');\r\n        resolve(false);\r\n      }\r\n\r\n      mediaDevices.enumerateDevices().then((devices) => {\r\n        if (devices.some(device => device.kind === 'videoinput')) {\r\n            resolve(true);\r\n        } else {\r\n            resolve(false);\r\n        }\r\n      }).catch(()=> reject(false));\r\n    });\r\n}"],"sourceRoot":""}